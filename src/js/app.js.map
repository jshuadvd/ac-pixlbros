<<<<<<< HEAD
{"version":3,"sources":["index.js"],"names":["lon","fovMin","fovMax","onPointerDownPointerX","onPointerDownPointerY","onPointerDownLon","onPointerDownLat","blocked","curPosX","showLoader","bar","ProgressBar","Path","easing","duration","set","percent","int","setInterval","clearInterval","animate","TweenMax","to","$","autoAlpha","display","fixed","toFixed","html","hide","setupButtons","each","$el","clone","find","attr","append","after","on","key","console","log","buttons","event","currentTarget","audio","Audio","play","playAudio","document","ready","index","el","get","offLine","container","parents","pause","show","camera","color","controls","clock","delta","deviceControls","h","hotspot","info","logoGeo","logoMaterial","logoMesh","logoTexture","marker","mesh","materials","mouse","mousePos","objects","parameters","particles","particleMaterial","rainDensity","rainGeometry","raycaster","renderer","scene","size","smokeParticles","spotLight","spotLightHelper","sprite","stats","layer","hsParticles","rotateSpeed","hotspots","hotspotObjects","content","header","body","feature","type","location","position","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLon","lat","onMouseDownLat","phi","theta","getElementById","selectedObjects","loader","renderPass","outlinePass","composer","effectFXAA","controlsEnabled","showingModal","init","width","window","innerWidth","height","innerHeight","devicePixelRatio","THREE","WebGLRenderer","antialias","shadowMap","enabled","setClearColor","setPixelRatio","setSize","PerspectiveCamera","target","Vector3","Scene","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","fog","Mesh","name","add","initStats","DeviceOrientationControls","Raycaster","Vector2","buildHotspots","PointerLockControls","getObject","Clock","EffectComposer","RenderPass","addPass","OutlinePass","edgeStrength","edgeGlow","edgeThickness","pulsePeriod","visibleEdgeColor","r","g","b","onLoad","texture","patternTexture","wrapS","RepeatWrapping","wrapT","lod","ShaderPass","FXAAShader","uniforms","value","renderToScreen","appendChild","domElement","addEventListener","getPosition","onDocumentTouchStart","onDocumentMouseWheel","onWindowResize","onDocumentMouseDownNew","onDocumentMouseMoveNew","onDocumentMouseUpNew","initRain","buildHotspot","preventDefault","clientX","clientY","onDocumentMouseMove","JSONLoader","hotspotObject","center","opacity","box","Box3","setFromObject","x","y","z","rotation","Math","PI","random","toString","substring","hitboxGeo","BoxBufferGeometry","getSize","hitboxMat","wireframe","hitboxMesh","hotspotLocation","group","Group","buildSmoke","light","DirectionalLight","directionalLight","normalize","smokeTexture","ImageUtils","loadTexture","smokeMaterial","MeshLambertMaterial","transparent","smokeGeo","PlaneGeometry","p","particle","push","evolveSmoke","sp","length","crossOrigin","evolveHotspot","hs","Geometry","sprite1","sprite2","sprite3","sprite4","sprite5","i","vertex","vertices","PointCloudMaterial","blending","AdditiveBlending","depthTest","setHSL","PointCloud","animateRain","time","Date","now","children","object","translateY","aspect","updateProjectionMatrix","touches","onDocumentMouseDown","addSelectedObject","checkRaycasterCollisions","setFromCamera","intersects","intersectObjects","items","filter","intersect","match","forEach","item","parent","indexOf","hideModal","fov","onComplete","trigger","renderFeatureMesh","CubeGeometry","cube","pointLight","PointLight","reqAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","render","spawnModal","css","top","charCode","text","rotateHotspots","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","onDocumentMouseUp","deltaY","update","max","min","degToRad","sin","cos","lookAt","getDelta","Number","undefined","scrollLeft","documentElement","scrollTop","offsetLeft","offsetTop","TweenLite","ticker","Stats","style","left","zIndex","slick","dots","infinite","speed","slidesToShow","slidesToScroll","responsive","breakpoint","settings"],"mappings":"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","file":"app.js","sourcesContent":["\nlet lon = 30;\n// let lat = 0;\n// let phi = 0;\n// let theta = 0;\nlet fovMin = 75;\nlet fovMax = 50;\n// let zoomed = false;\n\nlet onPointerDownPointerX;\nlet onPointerDownPointerY;\nlet onPointerDownLon;\nlet onPointerDownLat;\n// let onPointerDownLat;\nlet blocked = false;\nlet curPosX = 0;\n\n//************************************************************************//\n//                             Init Loader                                //\n//************************************************************************//\n\nlet showLoader = false;\n\nif(showLoader) {\n\tvar bar = new ProgressBar.Path('.st0', {\n\t\teasing: 'easeInOut',\n\t\tduration: 800\n\t});\n\tbar.set(0)\n\n\tlet percent = 0.1\n\tlet int = setInterval(function() {\n\t\tpercent += 0.1;\n\t\tif(percent >= 1.0) {\n\t\t\tclearInterval(int);\n\t\t} else {\n\t\t\tbar.animate(percent, () => {\n\t\t\t\tTweenMax.to($('#loader') , 0.3, {autoAlpha: 0, display: 'none'});\n\t\t\t});\n\t\t\tlet fixed = (percent*100).toFixed(0);\n\t\t\t$('text').html(`${fixed}%`)\n\t\t}\n\t}, 500)\n\n\t// THREE.DefaultLoadingManager.onProgress = function ( item, loaded, total ) {\n\t// \tlet percent = loaded/total\n\t// \tbar.animate(percent, function() {\n\t// \t\tTweenMax.to($('#loader') , 0.3, {autoAlpha: 0, display: 'none'});\n\t// \t});\n\t// \tlet fixed = (percent*100).toFixed(0);\n\t// \t$('text').html(`${fixed}%`);\n\t// };\n} else {\n\t$('#loader').hide();\n}\n\nfunction setupButtons() {\n\t$('.button-outer .logo').each(function() {\n\t\tvar $el = $(this);\n\t\tvar clone = $el.find('.clone').clone().attr('class', 'fill blur');\n\t\t$el.append(clone);\n\t});\n\t$('.inner-path').each(function() {\n\t\tvar $el = $(this);\n\t\tvar clone = $el.clone().attr('class', 'blur');\n\t\t$el.after(clone);\n\t});\n\t$('.button-outer').on('mouseenter', function() {\n\t\tvar key = $(this).attr('key');\n\t\tconsole.log('moustenter', key);\n\t\tbuttons[key].animate(1);\n\t});\n\t$('.button-outer').on('mouseleave', (event) => {\n\t\tvar key = $(event.currentTarget).attr('key');\n\t\tbuttons[key].set(0);\n\t});\n}\n\nvar buttons = {};\n\n\n//************************************************************************//\n//                             Init Audio                                 //\n//************************************************************************//\n\n// let audio = document.createElement('audio');\n// let source = document.createElement('source');\n// source.src = 'audio/AC-Trailer.mp3';\n// audio.appendChild(source);\n// audio.play();\n\nlet audio = new Audio('audio/AC-Trailer.mp3');\naudio.play();\n\nlet playAudio = true;\n\n// $('.sound').click(function() {\n//   if (this.paused == false) {\n//       audio.pause();\n//   } else {\n//       audio.play();\n//   }\n// });\n\n\n// herp derp\n\n$(document).ready(function() {\n\t$('.button-outer').each((index, el) => {\n\t\tvar $el = $(el);\n\t\tvar key = $el.attr('key');\n\t\tconsole.log('outer-path', $el.find('.outer-path'));\n\t\tbuttons[key] = new ProgressBar.Path($el.find('.outer-path').get(0), {\n\t\t\teasing: 'easeInOut',\n\t\t\tduration: 500\n\t\t});\n\t\tbuttons[key].set(0);\n\t});\n\n\t$('.button-outer').on('mouseenter', function() {\n\t\tvar key = $(this).attr('key');\n\t\tconsole.log('moustenter', key);\n\t\tbuttons[key].animate(1);\n\t\t// $(this).find('.outer-path').data('progress')\n\t});\n\n\t$('.button-outer').on('mouseleave', (event) => {\n\t\tvar key = $(event.currentTarget).attr('key');\n\t\tbuttons[key].set(0);\n\t\t// $(event.currentTarget).find('.outer-path').data('progress').set(0);\n\t});\n\n\tlet offLine = $('.sound line');\n\tlet container = offLine.parents('svg');\n\t$('.sound').on('click', () => {\n\t\tif(playAudio) {\n\t\t\taudio.pause();\n\t\t\toffLine.show();\n\t\t\tcontainer.attr('class', 'off');\n\t\t} else {\n\t\t\taudio.play();\n\t\t\toffLine.hide();\n\t\t\tcontainer.attr('class', '');\n\t\t}\n\t\tplayAudio = !playAudio;\n\t});\n\n\tsetupButtons();\n});\n\n//************************************************************************//\n//                              Variables                           \t  //\n//************************************************************************//\n\nlet camera, container, color, controls, clock, delta, deviceControls, h, hotspot, info, logoGeo, logoMaterial, logoMesh, logoTexture, marker, mesh, materials = [], mouse, mousePos, objects = [], parameters, particles, particleMaterial, rainDensity = 20000, rainGeometry, raycaster, renderer, scene, size, smokeParticles = [], spotLight, spotLightHelper, sprite, stats; \nlet layer = false;\nlet hsParticles = [];\nlet rotateSpeed = 0.03\nlet hotspots = [];\nlet hotspotObjects = [\n\t{\n\t\tcontent: {\n\t\t\theader: '',\n\t\t\tbody: ''\n\t\t},\n\t\tfeature: {\n\t\t\ttype: 'mesh',\n\t\t\tlocation: ''\n\t\t},\n\t\tposition: [450, 0, 150],\n\t},\n\t{\n\t\tposition: [370, 0, 280],\n\t},\n\t{\n\t\tposition: [25, 0, 400],\n\t},\n\t{\n\t\tposition: [-115, 0, 400],\n\t},\n\t{\n\t\tposition: [-400, 0, 205],\n\t},\n\t{\n\t\tposition: [-445, 0, 30],\n\t},\n\t{\n\t\tposition: [-265, 0, -380],\n\t},\n\t{\t\n\t\tposition: [-60, 0, -455],\n\t},\n\t{\n\t\tposition: [125, 0, -455],\n\t},\n\t{\n\t\tposition: [400, 0, -205]\n\t},\n];\n\nlet isUserInteracting = true,\nonMouseDownMouseX = 0, onMouseDownMouseY = 0,\nonMouseDownLon = 0,\nlat = 0, onMouseDownLat = 0,\nphi = 0, theta = 0;\n\ncontainer = document.getElementById( 'container' );\n\nlet selectedObjects = [];\nlet loader;\nlet renderPass;\nlet outlinePass;\nlet composer;\nlet effectFXAA;\nlet controlsEnabled = false;\nlet showingModal = false;\n\n// var havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;\n\n// if (havePointerLock) {\n// \tvar element = document.body;\n// \tvar pointerlockchange = function(event) {\n// \t\tif(showingModal) return;\n// \t\tif (document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element) {\n// \t\t\tcontrolsEnabled = true;\n// \t\t\t// controls.enabled = true;\n// \t\t\tblocker.style.display = 'none';\n// \t\t} else {\n// \t\t\t// controls.enabled = false;\n// \t\t\tcontrolsEnabled = false;\n// \t\t\tblocker.style.display = '-webkit-box';\n// \t\t\tblocker.style.display = '-moz-box';\n// \t\t\tblocker.style.display = 'box';\n// \t\t\tinstructions.style.display = '';\n// \t\t}\n// \t};\n\n// \tvar pointerlockerror = function(event) {\n// \t\tinstructions.style.display = '';\n// \t};\n\n// \t// Hook pointer lock state change events\n// \tdocument.addEventListener('pointerlockchange', pointerlockchange, false);\n// \tdocument.addEventListener('mozpointerlockchange', pointerlockchange, false);\n// \tdocument.addEventListener('webkitpointerlockchange', pointerlockchange, false);\n\n// \tdocument.addEventListener('pointerlockerror', pointerlockerror, false);\n// \tdocument.addEventListener('mozpointerlockerror', pointerlockerror, false);\n// \tdocument.addEventListener('webkitpointerlockerror', pointerlockerror, false);\n\n// \tinstructions.addEventListener('click', function(event) {\n// \t\tinstructions.style.display = 'none';\n// \t\t// Ask the browser to lock the pointer\n// \t\tpointerLock();\n// \t}, false);\n// } else {\n// \tinstructions.innerHTML = 'Your browser doesn\\'t seem to support Pointer Lock API';\n// }\n\n// function pointerLock() {\n// \telement.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;\n// \tif (/Firefox/i.test(navigator.userAgent)) {\n// \t\tvar fullscreenchange = function(event) {\n// \t\t\tif (document.fullscreenElement === element || document.mozFullscreenElement === element || document.mozFullScreenElement === element) {\n// \t\t\t\tdocument.removeEventListener('fullscreenchange', fullscreenchange);\n// \t\t\t\tdocument.removeEventListener('mozfullscreenchange', fullscreenchange);\n// \t\t\t\telement.requestPointerLock();\n// \t\t\t}\n// \t\t};\n// \t\tdocument.addEventListener('fullscreenchange', fullscreenchange, false);\n// \t\tdocument.addEventListener('mozfullscreenchange', fullscreenchange, false);\n// \t\telement.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;\n// \t\telement.requestFullscreen();\n// \t} else {\n// \t\telement.requestPointerLock();\n// \t}\n// }\n\ninit();\nanimate();\n\n//************************************************************************//\n//                             Init Scene                                 //\n//************************************************************************//\n\nfunction init() {\n\n\tvar width = window.innerWidth || 1;\n\tvar height = window.innerHeight || 1;\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\trenderer = new THREE.WebGLRenderer( { antialias: false } );\n\trenderer.shadowMap.enabled = true;\n\trenderer.setClearColor( 0xa0a0a0 );\n\trenderer.setPixelRatio( 1 );\n\trenderer.setSize( width, height );\n\n\tcamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000 );\n\tcamera.target = new THREE.Vector3( 0, 0, 0 );\n\tscene = new THREE.Scene();\n\n\tlet geometry = new THREE.SphereGeometry( 500, 60, 400 );\n\tgeometry.scale( - 1, 1, 1 );\n\n\tlet material = new THREE.MeshBasicMaterial( {\n\t\tmap: new THREE.TextureLoader().load( 'textures/AnimusPanoramaTreated.jpg' ),\n\t\tfog: true,\n\t});\n\t\n\tmesh = new THREE.Mesh( geometry, material );\n\tmesh.name = 'scene';\n\tscene.add( mesh );\n\t\n\tstats = initStats()\n\t\n\tdeviceControls = new THREE.DeviceOrientationControls( camera, container );\n\t\n\traycaster = new THREE.Raycaster();\n\tmouse = new THREE.Vector2();\n\t\n\t// Build items for raycaster clicks\n\tbuildHotspots();\n\n\t// temp sphere\n\t// var sphereMaterial = new THREE.MeshNormalMaterial();\n\t// var sphereGeometry = new THREE.SphereGeometry(200, 200, 200);\n\t// var sphere = new THREE.Mesh( sphereGeometry, sphereMaterial );\n\t// // sphere.position.set(0, 0, 0);\n\t// sphere.position.set(0, 0, 200);\n\t// // sphere.position.set(-60, 55, 0);\n\t// scene.add( sphere );\n\n\tcontrols = new THREE.PointerLockControls(camera);\n\tscene.add(controls.getObject());\n\t\n\tclock = new THREE.Clock();\n\t// renderer = new THREE.WebGLRenderer({\n\t// \tantialias: true,\n\t// \talpha: true,\n\t// });\n\t// renderer.setPixelRatio( window.devicePixelRatio );\n\t// renderer.setSize( window.innerWidth, window.innerHeight );\n\n\t// postprocessing\n\tcomposer = new THREE.EffectComposer( renderer );\n\trenderPass = new THREE.RenderPass( scene, camera );\n\tcomposer.addPass( renderPass );\n\toutlinePass = new THREE.OutlinePass( new THREE.Vector2(window.innerWidth, window.innerHeight), scene, camera);\n\n\toutlinePass.edgeStrength = 2.0;\n\toutlinePass.edgeGlow = 5.0;\n\toutlinePass.edgeThickness = 2.0;\n\toutlinePass.pulsePeriod = 0.8;\n\t// outlinePass.visibleEdgeColor = '#fffffff'; //{r: 255, g: 255, b: 255}\n\toutlinePass.visibleEdgeColor = {r: 255, g: 255, b: 255};\n\n\tcomposer.addPass( outlinePass );\n\t// @todo: prob dont need this texture but SHRUG\n\tvar onLoad = function(texture) {\n\t\toutlinePass.patternTexture = texture;\n\t\ttexture.wrapS = THREE.RepeatWrapping;\n\t\ttexture.wrapT = THREE.RepeatWrapping;\n\t};\n\tvar lod = new THREE.TextureLoader();\n\tlod.load(\n\t\t// resource URL\n\t\t'textures/tri_pattern.jpg',\n\t\t// Function when resource is loaded\n\t\tonLoad\n\t);\n\n\teffectFXAA = new THREE.ShaderPass(THREE.FXAAShader);\n\teffectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight );\n\teffectFXAA.renderToScreen = true;\n\tcomposer.addPass( effectFXAA );\n\n\tcontainer.appendChild( renderer.domElement );\n\tcontainer.addEventListener(\"mousemove\", getPosition, false);\n\t\n\t// document.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\t// document.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\t// document.addEventListener( 'mouseup', onDocumentMouseUp, false );\n\tdocument.addEventListener( 'touchstart', onDocumentTouchStart, false );\n\tdocument.addEventListener( 'wheel', onDocumentMouseWheel, false );\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\tdocument.addEventListener( 'mousedown', onDocumentMouseDownNew, false );\n\tdocument.addEventListener( 'mousemove', onDocumentMouseMoveNew, false );\n\tdocument.addEventListener( 'mouseup', onDocumentMouseUpNew, false );\n\n\n\tinitRain();\n\t// buildSmoke();\n\tbuildHotspot();\n\t\n\tdocument.body.appendChild( renderer.domElement );\n\n}\n\nfunction onDocumentMouseDownNew(event) {\n\tevent.preventDefault();\n\n\tconsole.log('onDocumentMouseDownNew');\n\tcontrolsEnabled = true;\n\n\tonPointerDownPointerX = event.clientX;\n\tonPointerDownPointerY = event.clientY;\n\n\tonPointerDownLon = lon;\n\tonPointerDownLat = lat;\n}\n\nfunction onDocumentMouseMoveNew(event) {\n\tconsole.log('onDocumentMouseMoveNew');\n\tonDocumentMouseMove(event);\n\t// if ( isUserInteracting === true ) {\n\t// \tlon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;\n\t// \tlat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;\n\t// }\n}\n\nfunction onDocumentMouseUpNew() {\n\tconsole.log('onDocumentMouseUpNew');\n\tcontrolsEnabled = false;\n}\n\n\nfunction buildHotspots() {\n\tloader = new THREE.JSONLoader();\n\tloader.load('js/ac-badge-big.js', function(geometry) {\n\t// loader.load('js/ac-badge.js', function(geometry) {\n\t// loader.load('js/ac-logo.js', function(geometry) {\n\t\thotspots = hotspotObjects.map( (hotspotObject, index) => {\n\t\t\tgeometry.center();\n\n\t\t\t// previous ac-logo.js scale\n\t\t\t// let scale = 10;\n\n\t\t\tlet scale = 45;\n\n\t\t\tlet hotspot = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial( { color: '#cccccc', opacity: 1 } ));\n\t\t\thotspot.name = `hotspot-${index}`;\n\t\t\tvar box = new THREE.Box3().setFromObject(hotspot);\n\t\t\thotspot.scale.x = hotspot.scale.y = hotspot.scale.z = scale\n\t\t\thotspot.rotation.x = .5*Math.PI\n\t\t\tconsole.log('hotspotObject', hotspotObject);\n\t\t\thotspot.hotspot = hotspotObject;\n\n\t\t\t// auto generate some stuff!\n\t\t\t// {\n\t\t\t// \tcontent: {\n\t\t\t// \t\theader: '',\n\t\t\t// \t\tbody: ''\n\t\t\t// \t},\n\t\t\t// \tfeature: {\n\t\t\t// \t\ttype: 'mesh',\n\t\t\t// \t\tlocation: ''\n\t\t\t// \t},\n\t\t\t// \tposition: [-20, 0, -475],\n\t\t\t// },\n\t\t\thotspot.hotspot.content = {};\n\t\t\thotspot.hotspot.content.header = hotspot.name;\n\t\t\thotspot.hotspot.content.body = Math.random().toString(36).substring(7);\n\n\t\t\t// hotspot.scale.x = 8\n\t\t\t// hotspot.scale.y = 10\n\t\t\t// hotspot.scale.z = 8\n\t\t\t// hotspot.rotation.y = 3\n\n\t\t\tlet hitboxGeo = new THREE.BoxBufferGeometry( box.getSize().x * scale * 1.2, 200, box.getSize().x * scale * 1.2 );\n\t\t\tlet hitboxMat = new THREE.MeshBasicMaterial({wireframe: true});\n\t\t\t// // hitboxMat.visible = false\n\t\t\tlet hitboxMesh = new THREE.Mesh( hitboxGeo, hitboxMat );\n\t\t\thitboxMesh.name = `hitbox-${index}`;\n\n\t\t\tlet hotspotLocation = hotspotObject.position;\n\n\t\t\tvar group = new THREE.Group();\n\t\t\tgroup.name = `group-${index}`\n\t\t\tgroup.position.set(hotspotLocation[0], hotspotLocation[1], hotspotLocation[2]);\n\t\t\tscene.add(group);\n\t\t\tgroup.add(hotspot);\n\t\t\tgroup.add(hitboxMesh);\n\n\t\t\treturn group;\n\n\t\t});\n\t});\n}\n\nfunction buildSmoke() {\n\t// Smoke Light\n\tlet light = new THREE.DirectionalLight(0xffffff, 1.5);\n\tlight.position.set(-1, 0, 1);\n\tscene.add(light);\n\t\n\tlet directionalLight = new THREE.DirectionalLight(0xffffff);\n\tdirectionalLight.position.set(1, 1, 1).normalize();\n\tscene.add(directionalLight);\n  \n\tlet smokeTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/Smoke-Element.png');\n\tlet smokeMaterial = new THREE.MeshLambertMaterial({\n\t\tcolor: 0xffffff, \n\t\tmap: smokeTexture, \n\t\ttransparent: true\n\t});\n\tlet smokeGeo = new THREE.PlaneGeometry(500, 500);\n\t \n\tfor (let p = 0; p < 150; p++) {\n\t\tlet particle = new THREE.Mesh(smokeGeo,smokeMaterial);\n\t\tparticle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n\t\tparticle.rotation.z = Math.random() * 360;\n\t\tscene.add(particle);\n\t\tsmokeParticles.push(particle);\n\t}\t\n}\n\n\nfunction evolveSmoke() {\n\tlet sp = smokeParticles.length;\n\twhile(sp--) {\n\t\tsmokeParticles[sp].rotation.z += (delta * 0.2);\n\t}\n}\n\nfunction buildHotspot() {\n\tTHREE.ImageUtils.crossOrigin = ''; \n\t\n\t// for ( let i = 0; i < 10; i ++ ) {\n\t\t\n\t\t// let logoTexture = THREE.ImageUtils.loadTexture('/textures/animus_red_logo.png');\n\t\t// logoTexture.crossOrigin = 'anonymous';\n\t\t\n\t\t// let logoMaterial = new THREE.MeshLambertMaterial({\n\t\t// \tcolor: 0xffffff, \n\t\t// \tmap: logoTexture, \n\t\t// \ttransparent: true\n\t\t// });\n\t\t\n\t\t// let logoGeo = new THREE.PlaneGeometry(40, 60);\n\t\t// // let hotspots = [];\n\t\t\n\t\t// hotspot = new THREE.Mesh(logoGeo, logoMaterial);\n\t\t\n\t\t// // hotspot.position.x = Math.random() * 800 - 400;\n\t\t// // hotspot.position.y = 0;\n\t\t// // hotspot.position.z = -400;\n\t\t// // \n\t\t// // hotspot.scale.x = Math.random() * 2 + 1;\n\t\t// // hotspot.scale.y = Math.random() * 2 + 1;\n\t\t// // hotspot.scale.z = Math.random() * 2 + 1;\n\t\t// // \n\t\t// // hotspot.rotation.x = Math.random() * 2 * Math.PI;\n\t\t// // hotspot.rotation.y = Math.random() * 2 * Math.PI;\n\t\t// // hotspot.rotation.z = Math.random() * 2 * Math.PI;\n\t\t// hotspot.position.set(-45, 0, -400);\n\t\t// // hotspot.rotation.x = 0.1;\n\t\t// scene.add(hotspot);\n\t\t\n\t\t// hotspots.push(hotspot)\t\t\n\t// }\t\n\t\n\t let light = new THREE.DirectionalLight(0xffffff, 1.5);\n\t light.position.set(-1, 0, 1);\n\t scene.add(light);\n\t// for (let p = 0; p < 50; p++) {\n\t//     let particle = new THREE.Mesh(logoGeo, logoMaterial);\n\t//     particle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n\t//     particle.rotation.z = Math.random() * 360;\n\t//     scene.add(particle);\n\t//     hsParticles.push(particle);\n\t// }\t\n}\n\nfunction evolveHotspot() {\n\tlet hs = hsParticles.length;\n\twhile(hs--) {\n\t\thsParticles[hs].rotation.z += (delta * 0.2);\n\t}\n}\n\nfunction initRain() {\n\trainGeometry = new THREE.Geometry();\n\n\tlet sprite1 = THREE.ImageUtils.loadTexture( \"textures/rain1.png\" ),\n\tsprite2 = THREE.ImageUtils.loadTexture( \"textures/rain2.png\" ),\n\tsprite3 = THREE.ImageUtils.loadTexture( \"textures/rain3.png\" ),\n\tsprite4 = THREE.ImageUtils.loadTexture( \"textures/rain4.png\" ),\n\tsprite5 = THREE.ImageUtils.loadTexture( \"textures/rain5.png\" );\n\n\tfor (let i = 0; i < rainDensity; i++ ) {\n\t\tlet vertex = new THREE.Vector3();\n\t\tvertex.x = Math.random() * 2000 - 1000;\n\t\tvertex.y = Math.random() * 4000 + 500;\n\t\tvertex.z = Math.random() * 2000 - 1000;\n\n\t\trainGeometry.vertices.push( vertex );\n\t}\n\n\tparameters = [ [ [1.0, 0.2, 0.5], \tsprite2, 20 ],\n\t\t\t\t   [ [0.95, 0.1, 0.5], \tsprite3, 15 ],\n\t\t\t\t   [ [0.90, 0.05, 0.5], sprite1, 10 ],\n\t\t\t\t   [ [0.85, 0, 0.5], \tsprite5, 8 ],\n\t\t\t\t   [ [0.80, 0, 0.5], \tsprite4, 5 ],\n\t\t\t\t   ];\n\n\tfor (let i = 0; i < parameters.length; i++ ) {\n\n\t\tcolor  = parameters[i][0];\n\t\tsprite = parameters[i][1];\n\t\tsize   = parameters[i][2];\n\n\t\tmaterials[i] = new THREE.PointCloudMaterial({ \n\t\t\tsize: size, \n\t\t\tmap: sprite, \n\t\t\tblending: THREE.AdditiveBlending, \n\t\t\tdepthTest: false, \n\t\t\ttransparent : true \n\t\t});\n\t\tmaterials[i].color.setHSL( color[0], color[1], color[2] );\n\n\t\tparticles = new THREE.PointCloud( rainGeometry, materials[i] );\n\n\t\tparticles.rotation.z = Math.random() * 0.20 + 0.10;\n\n\t\tscene.add( particles );\n\t}\n}\n\nfunction animateRain() {\n\t// console.log(\"I'M ANIMATING THINGS\");\n\tlet time = Date.now() * 0.00005;\n\n\tfor (let i = 0; i < scene.children.length; i++ ) {\n\n\t\tlet object = scene.children[i];\n\t\t\n\t\tif ( object instanceof THREE.PointCloud ) {\n\t\t\t// Not getting into the log here\n\t\t\tconsole.log(\"I'M ANIMATING THINGS\");\n\t\t\tif (i == 0) {\n\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif (i > 0) {\n\t\t\t\tif (layer)\n\t\t\t\t\tobject.translateY(-10);\n\t\t\t\telse\n\t\t\t\t\tif(scene.children[i-1].position.y < ((window.innerHeight * -1) / 2 - 1000))\n\t\t\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif ((object.position.y < window.innerHeight * -1 * 5)) {\n\t\t\t\t\tobject.position.y = 500;\n\t\t\t\t\tobject.position.x = 0;\n\t\t\t\t\tif (i == 0) layer = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = 0; i < materials.length; i++ ) {\n\n\t\tcolor = parameters[i][0];\n\n\t\th = ( 360 * ( color[0] + time ) % 360 ) / 360;\n\t\tmaterials[i].color.setHSL( h, color[1], color[2] );\n\n\t}\n}\n\nfunction onWindowResize() {\n\tvar width = window.innerWidth || 1;\n\tvar height = window.innerHeight || 1;\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\tcamera.aspect = width / height;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( width, height );\n\tcomposer.setSize( width, height );\n\teffectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight );\n}\n\nfunction onDocumentTouchStart( event ) {\n\tevent.preventDefault();\n\tevent.clientX = event.touches[0].clientX;\n\tevent.clientY = event.touches[0].clientY;\n\tonDocumentMouseDown( event );\n}\n\nfunction addSelectedObject(object) {\n\tselectedObjects = [];\n\tselectedObjects.push(object);\n}\n\nfunction checkRaycasterCollisions() {\n\traycaster.setFromCamera(mouse, camera);\n\tlet intersects = raycaster.intersectObjects(scene.children, true);\n\t// @todo: we need to add deselect here\n\tlet items = intersects.filter( intersect => intersect.object.name.match(/hitbox/) )\n\tif(items.length) {\n\t\titems.forEach((item) => {\n\t\t\tlet target = item.object.parent.children[0]\n\t\t\tif(selectedObjects.indexOf(target) === -1) {\n\t\t\t\taddSelectedObject(target);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tselectedObjects = [];\n\t}\n\toutlinePass.selectedObjects = selectedObjects;\n}\n\nfunction hideModal() {\n\tfor(var i in buttons) {\n\t\tbuttons[i].set(0);\n\t}\n\tlet duration = 550/1000\n\tshowingModal = false;\n\t// pointerLock();\n\tTweenMax.to($('.modal-container') , 0.3, {autoAlpha: 0})\n\tTweenMax.to(camera, duration, {fov: fovMin, onComplete: function() {\n\t\tblocked = false;\n\t}});\n\t$('.button-outer').trigger('mouseleave');\n}\n\nfunction renderFeatureMesh() {\n\tvar feature = $('.feature');\n\n\tif(feature.find('canvas').length) return;\n\tvar scene = new THREE.Scene();\n\tvar camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n\n\tvar renderer = new THREE.WebGLRenderer();\n\trenderer.setSize(feature.width(), feature.height());\n\tfeature.append(renderer.domElement);\n\n\tvar geometry = new THREE.CubeGeometry(5, 5, 5);\n\tvar material = new THREE.MeshLambertMaterial({\n\t\tcolor: 0x00fff0\n\t});\n\tvar cube = new THREE.Mesh(geometry, material);\n\tscene.add(cube);\n\n\tcamera.position.z = 12;\n\n\tvar pointLight = new THREE.PointLight(0xFFFFFF);\n\n\tpointLight.position.x = 10;\n\tpointLight.position.y = 50;\n\tpointLight.position.z = 130;\n\n\tscene.add(pointLight);\n\n\tvar reqAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame;\n\n\tvar render = function() {\n\t\treqAnimFrame(render);\n\n\t\tvar delta = Math.random() * (0.06 - 0.02) + 0.02;\n\n\t\tcube.rotation.x += delta;\n\t\tcube.rotation.y += delta;\n\t\tcube.rotation.z -= delta;\n\n\t\trenderer.render(scene, camera);\n\t};\n\n\trender();\n}\n\nfunction spawnModal(hotspot) {\n\t$('.modal-container').css({top: 0})\n\t$('.modal-container .close').on('click', hideModal);\n\n\t$('.overlay').on('click', hideModal);\n\t$(document).on('keydown', (event) => {\n\t\tif(event.charCode === 0) {\n\t\t\thideModal();\n\t\t} \n\t})\n\t$('.modal .content h1').text(hotspot.content.header);\n\t$('.modal .content p').text(hotspot.content.body);\n\trenderFeatureMesh();\n}\n\nfunction onDocumentMouseDown( event ) {\n\n\tif(!controlsEnabled) return;\n\n\tif(selectedObjects.length) {\n\t\tconsole.log('DO STUFF', );\n\t\tlet hotspot = selectedObjects[0].hotspot;\n\t\tlet duration = 550/1000\n\t\tshowingModal = true;\n\t\tcontrolsEnabled = false;\n\t\t// document.exitPointerLock();\n\t\tTweenMax.to($('.modal-container') , 0.3, {autoAlpha: 1})\n\t\tTweenMax.to(camera, duration, {fov: fovMax, onComplete: spawnModal(hotspot)})\n\t\t// selectedObjects[0]\n\t}\n}\n\nfunction rotateHotspots() {\n\thotspots.forEach( hotspot => hotspot.rotation.y += rotateSpeed * 0.5 );\n}\n\nfunction onDocumentMouseMove( event ) {\n\t// isUserInteracting = true;\n\t\n\tvar movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n\tvar movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n\tif(controlsEnabled) {\n\t\t// console.log('onDocumentMouseMove', controlsEnabled);\n\t\tcurPosX += movementX;\n\t\tlon = curPosX\n\t}\n\t// if ( isUserInteracting === true ) {\n\t// \tlon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;\n\t// \t// lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;\n\t// }\n}\n\nfunction onDocumentMouseUp( event ) {\n\t// isUserInteracting = false;\n\tcontrolsEnabled = true;\n}\n\n// Zoom in & out | Need to limit this to the starting point and a endind point\nfunction onDocumentMouseWheel( event ) {\n\tif (camera.fov > 75) {\n\t\tcamera.fov = 75\n\t} else {\n\t\tcamera.fov += event.deltaY * 0.02;\n\t\tcamera.updateProjectionMatrix();\n\t}\n\t// camera.fov += event.deltaY * 0.02;\n\t// camera.updateProjectionMatrix();\n}\n\nfunction animate() {\n\trequestAnimationFrame( animate );\n\tupdate();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n}\n\nfunction update() {\n\t// if ( isUserInteracting === false ) {\n\t// \t// lon += 0.1;\n\t// }\n\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\tphi = THREE.Math.degToRad( 90 - lat );\n\ttheta = THREE.Math.degToRad( lon );\n\n\tcamera.target.x = 500 * Math.sin( phi ) * Math.cos( theta );\n\t// camera.target.y = 500 * Math.cos( phi );\n\tcamera.target.z = 500 * Math.sin( phi ) * Math.sin( theta );\n\tcamera.lookAt( camera.target );\n\n\t/*\n\t// distortion\n\tcamera.position.copy( camera.target ).negate();\n\t*/\n\t// let delta = clock.getDelta(), speed = delta * CAMERAMOVESPEED;\n\t// controls.update(delta);\n\t// spotLight.target = marker;\n\t// controls.update()\n\t\n\t// spotLightHelper.update()\n\tstats.update()\n\tdelta = clock.getDelta();\n\n\tevolveSmoke();\n\tevolveHotspot();\n\t// animateRain();\n\t// rotateHotspot();\n\trotateHotspots();\n\n\tcheckRaycasterCollisions();\n\t// rainEngine.update(0.01 * 0.5)\n\ttheta += 0.1;\n\t// let radius = 600;\n\t// camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );\n\t// camera.position.y = radius * Math.sin( THREE.Math.degToRad( theta ) );\n\t// camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );\n\t// camera.lookAt( scene.position );\n\tif (window.innerWidth < 800) {\n\t\tdeviceControls.update();\n\t}\n\t\n\t// if (window.DeviceOrientationEvent) {\n\t// \twindow.addEventListener('deviceorientation', function(event) {\n\t// \t\tlet alpha = event.alpha;\n\t// \t\tlet beta = event.beta;\n\t// \t\tlet gamma = event.gamma;\n\t// \t\t// console.log(\"We on Mobile\")\n\t// \t\t// console.log(\"GAMMA\" gamma);\n\t// \t\tdeviceControls.update();\n\t// \t\t// Do something\n\t// \t}, false);\n\t// }\n\t\n\t\n\t// deviceControls.connect();\n\trenderer.render( scene, camera );\n\t// renderer.render( scene, camera );\n\tcamera.updateProjectionMatrix();\n\tcomposer.render();\n\t// renderer.autoClear = true;\n\t// renderer.setClearColor( 0xfff0f0 );\n\t// renderer.setClearAlpha( 0.0 );\n}\n\nfunction getPosition(event) {\n\tlet x = new Number();\n\tlet y = new Number();\n\t\n\tif (event.x != undefined && event.y != undefined) {\n\t\tx = event.x;\n\t\ty = event.y;\n\t} else { // Firefox method to get the position\n\t\tx = event.clientX + document.body.scrollLeft +\n\t\tdocument.documentElement.scrollLeft;\n\t\ty = event.clientY + document.body.scrollTop +\n\t\tdocument.documentElement.scrollTop;\n\t}\n\tx -= container.offsetLeft;\n\ty -= container.offsetTop;\t\n\t// alert(\"x: \" + x + \"  y: \" + y);\n\tconsole.log(\"x: \" + x + \"  y: \" + y);\n}\n\nTweenLite.ticker.addEventListener(\"tick\", render);\n\nfunction initStats() {\n\t// stats.setMode(0); // 0: fps, 1: ms\n\t// Align top-left\n\tstats = new Stats();\n\tstats.domElement.style.position = 'absolute';\n\t// stats.domElement.style.bottom = '0px';\n\tstats.domElement.style.left = '0px';\n\tstats.domElement.style.top = '0px';\n\tstats.domElement.style.zIndex = 100;\n\tcontainer.appendChild(stats.domElement);\n\treturn stats;\n}\n\n\n$(document).ready(function(){\n\t$('.slider').slick({\n\t\tdots: false,\n\t\tinfinite: false,\n\t\tspeed: 300,\n\t\tslidesToShow: 1,\n\t\tslidesToScroll: 4,\n\t\tresponsive: [\n\t\t\t{\n\t\t\t\tbreakpoint: 1024,\n\t\t\t\tsettings: {\n\t\t\t\t\tslidesToShow: 1,\n\t\t\t\t\tslidesToScroll: 3,\n\t\t\t\t\tinfinite: true,\n\t\t\t\t\tdots: true\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tbreakpoint: 600,\n\t\t\t\tsettings: {\n\t\t\t\t\tslidesToShow: 1,\n\t\t\t\t\tslidesToScroll: 3\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tbreakpoint: 480,\n\t\t\t\tsettings: {\n\t\t\t\t\tslidesToShow: 1,\n\t\t\t\t\tslidesToScroll: 3\n\t\t\t\t}\n\t\t\t}\n\t\t\t// You can unslick at a given breakpoint now by adding:\n\t\t\t// settings: \"unslick\"\n\t\t\t// instead of a settings object\n\t\t]\n\t})\n});"]}
=======
{"version":3,"sources":["index.js"],"names":["lon","fovMin","fovMax","onPointerDownPointerX","onPointerDownLon","blocked","curPosX","showLoader","bar","ProgressBar","Path","easing","duration","set","percent","int","setInterval","clearInterval","animate","TweenMax","to","$","autoAlpha","display","fixed","toFixed","html","hide","setupButtons","each","$el","clone","find","attr","append","after","on","key","console","log","buttons","event","currentTarget","audio","Audio","play","playAudio","document","ready","index","el","get","offLine","container","parents","pause","show","camera","color","controls","clock","delta","deviceControls","h","hotspot","info","logoGeo","logoMaterial","logoMesh","logoTexture","marker","mesh","materials","mouse","mousePos","objects","parameters","particles","particleMaterial","rainDensity","rainGeometry","raycaster","renderer","scene","size","smokeParticles","spotLight","spotLightHelper","sprite","stats","layer","hsParticles","rotateSpeed","hotspots","hotspotObjects","content","header","body","feature","type","location","position","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLon","lat","onMouseDownLat","phi","theta","getElementById","selectedObjects","loader","renderPass","outlinePass","composer","effectFXAA","controlsEnabled","showingModal","havePointerLock","element","pointerlockchange","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","blocker","style","instructions","pointerlockerror","addEventListener","pointerLock","innerHTML","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","test","navigator","userAgent","fullscreenchange","fullscreenElement","mozFullscreenElement","mozFullScreenElement","removeEventListener","requestFullscreen","mozRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","init","width","window","innerWidth","height","innerHeight","devicePixelRatio","THREE","WebGLRenderer","antialias","shadowMap","enabled","setClearColor","setPixelRatio","setSize","PerspectiveCamera","target","Vector3","Scene","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","fog","Mesh","name","add","initStats","Raycaster","Vector2","buildHotspots","DeviceOrientationController","domElement","connect","setupControllerEventHandlers","PointerLockControls","getObject","Clock","EffectComposer","RenderPass","addPass","OutlinePass","edgeStrength","edgeGlow","edgeThickness","pulsePeriod","visibleEdgeColor","r","g","b","onLoad","texture","patternTexture","wrapS","RepeatWrapping","wrapT","lod","ShaderPass","FXAAShader","uniforms","value","renderToScreen","appendChild","getPosition","onDocumentMouseDown","onDocumentMouseMove","onDocumentMouseUp","onDocumentTouchStart","onDocumentMouseWheel","onWindowResize","initRain","buildHotspot","JSONLoader","hotspotObject","center","opacity","box","Box3","setFromObject","x","y","z","rotation","Math","PI","random","toString","substring","hitboxGeo","BoxBufferGeometry","getSize","hitboxMat","wireframe","hitboxMesh","hotspotLocation","group","Group","buildSmoke","light","DirectionalLight","directionalLight","normalize","smokeTexture","ImageUtils","loadTexture","smokeMaterial","MeshLambertMaterial","transparent","smokeGeo","PlaneGeometry","p","particle","push","evolveSmoke","sp","length","crossOrigin","evolveHotspot","hs","Geometry","sprite1","sprite2","sprite3","sprite4","sprite5","i","vertex","vertices","PointCloudMaterial","blending","AdditiveBlending","depthTest","setHSL","PointCloud","animateRain","time","Date","now","children","object","translateY","aspect","updateProjectionMatrix","preventDefault","clientX","touches","clientY","addSelectedObject","checkRaycasterCollisions","setFromCamera","intersects","intersectObjects","items","filter","intersect","match","forEach","item","parent","indexOf","hideModal","fov","onComplete","trigger","renderFeatureMesh","CubeGeometry","cube","pointLight","PointLight","reqAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","render","spawnModal","css","top","charCode","text","exitPointerLock","rotateHotspots","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","deltaY","update","max","min","degToRad","sin","cos","lookAt","getDelta","Number","undefined","scrollLeft","documentElement","scrollTop","offsetLeft","offsetTop","TweenLite","ticker","Stats","left","zIndex","deviceOrientationListener","deg2rad","beta","gamma","alpha","controllerEl","querySelector","controllerDefaultText","textContent","controllerSelectorEl","compassCalibrationPopupEl","cursor","innerText","useQuaternions"],"mappings":"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","file":"app.js","sourcesContent":["\nlet lon = 30;\n// let lat = 0;\n// let phi = 0;\n// let theta = 0;\nlet fovMin = 75;\nlet fovMax = 50;\n// let zoomed = false;\n\nlet onPointerDownPointerX;\nlet onPointerDownLon;\n// let onPointerDownLat;\nlet blocked = false;\nlet curPosX = 0;\n\n//************************************************************************//\n//                             Init Loader                                //\n//************************************************************************//\n\nlet showLoader = false;\n\nif(showLoader) {\n\tvar bar = new ProgressBar.Path('.st0', {\n\t\teasing: 'easeInOut',\n\t\tduration: 800\n\t});\n\tbar.set(0)\n\n\tlet percent = 0.1\n\tlet int = setInterval(function() {\n\t\tpercent += 0.1;\n\t\tif(percent >= 1.0) {\n\t\t\tclearInterval(int);\n\t\t} else {\n\t\t\tbar.animate(percent, () => {\n\t\t\t\tTweenMax.to($('#loader') , 0.3, {autoAlpha: 0, display: 'none'});\n\t\t\t});\n\t\t\tlet fixed = (percent*100).toFixed(0);\n\t\t\t$('text').html(`${fixed}%`)\n\t\t}\n\t}, 500)\n\n\t// THREE.DefaultLoadingManager.onProgress = function ( item, loaded, total ) {\n\t// \tlet percent = loaded/total\n\t// \tbar.animate(percent, function() {\n\t// \t\tTweenMax.to($('#loader') , 0.3, {autoAlpha: 0, display: 'none'});\n\t// \t});\n\t// \tlet fixed = (percent*100).toFixed(0);\n\t// \t$('text').html(`${fixed}%`);\n\t// };\n} else {\n\t$('#loader').hide();\n}\n\nfunction setupButtons() {\n\t$('.button-outer .logo').each(function() {\n\t\tvar $el = $(this);\n\t\tvar clone = $el.find('.clone').clone().attr('class', 'fill blur');\n\t\t$el.append(clone);\n\t});\n\t$('.inner-path').each(function() {\n\t\tvar $el = $(this);\n\t\tvar clone = $el.clone().attr('class', 'blur');\n\t\t$el.after(clone);\n\t});\n\t$('.button-outer').on('mouseenter', function() {\n\t\tvar key = $(this).attr('key');\n\t\tconsole.log('moustenter', key);\n\t\tbuttons[key].animate(1);\n\t});\n\t$('.button-outer').on('mouseleave', (event) => {\n\t\tvar key = $(event.currentTarget).attr('key');\n\t\tbuttons[key].set(0);\n\t});\n}\n\nvar buttons = {};\n\n\n//************************************************************************//\n//                             Init Audio                                 //\n//************************************************************************//\n\n// let audio = document.createElement('audio');\n// let source = document.createElement('source');\n// source.src = 'audio/AC-Trailer.mp3';\n// audio.appendChild(source);\n// audio.play();\n\nlet audio = new Audio('audio/AC-Trailer.mp3');\naudio.play();\n\nlet playAudio = true;\n\n// $('.sound').click(function() {\n//   if (this.paused == false) {\n//       audio.pause();\n//   } else {\n//       audio.play();\n//   }\n// });\n\n\n// herp derp\n\n$(document).ready(function() {\n\t$('.button-outer').each((index, el) => {\n\t\tvar $el = $(el);\n\t\tvar key = $el.attr('key');\n\t\tconsole.log('outer-path', $el.find('.outer-path'));\n\t\tbuttons[key] = new ProgressBar.Path($el.find('.outer-path').get(0), {\n\t\t\teasing: 'easeInOut',\n\t\t\tduration: 500\n\t\t});\n\t\tbuttons[key].set(0);\n\t});\n\n\t$('.button-outer').on('mouseenter', function() {\n\t\tvar key = $(this).attr('key');\n\t\tconsole.log('moustenter', key);\n\t\tbuttons[key].animate(1);\n\t\t// $(this).find('.outer-path').data('progress')\n\t});\n\n\t$('.button-outer').on('mouseleave', (event) => {\n\t\tvar key = $(event.currentTarget).attr('key');\n\t\tbuttons[key].set(0);\n\t\t// $(event.currentTarget).find('.outer-path').data('progress').set(0);\n\t});\n\n\tlet offLine = $('.sound line');\n\tlet container = offLine.parents('svg');\n\t$('.sound').on('click', () => {\n\t\tif(playAudio) {\n\t\t\taudio.pause();\n\t\t\toffLine.show();\n\t\t\tcontainer.attr('class', 'off');\n\t\t} else {\n\t\t\taudio.play();\n\t\t\toffLine.hide();\n\t\t\tcontainer.attr('class', '');\n\t\t}\n\t\tplayAudio = !playAudio;\n\t});\n\n\tsetupButtons();\n});\n\n//************************************************************************//\n//                              Variables                           \t  //\n//************************************************************************//\n\nlet camera, container, color, controls, clock, delta, deviceControls, h, hotspot, info, logoGeo, logoMaterial, logoMesh, logoTexture, marker, mesh, materials = [], mouse, mousePos, objects = [], parameters, particles, particleMaterial, rainDensity = 20000, rainGeometry, raycaster, renderer, scene, size, smokeParticles = [], spotLight, spotLightHelper, sprite, stats; \nlet layer = false;\nlet hsParticles = [];\nlet rotateSpeed = 0.03\nlet hotspots = [];\nlet hotspotObjects = [\n\t{\n\t\tcontent: {\n\t\t\theader: '',\n\t\t\tbody: ''\n\t\t},\n\t\tfeature: {\n\t\t\ttype: 'mesh',\n\t\t\tlocation: ''\n\t\t},\n\t\tposition: [450, 0, 150],\n\t},\n\t{\n\t\tposition: [370, 0, 280],\n\t},\n\t{\n\t\tposition: [25, 0, 400],\n\t},\n\t{\n\t\tposition: [-115, 0, 400],\n\t},\n\t{\n\t\tposition: [-400, 0, 205],\n\t},\n\t{\n\t\tposition: [-445, 0, 30],\n\t},\n\t{\n\t\tposition: [-265, 0, -380],\n\t},\n\t{\t\n\t\tposition: [-60, 0, -455],\n\t},\n\t{\n\t\tposition: [125, 0, -455],\n\t},\n\t{\n\t\tposition: [400, 0, -205]\n\t},\n];\n\nlet isUserInteracting = true,\nonMouseDownMouseX = 0, onMouseDownMouseY = 0,\nonMouseDownLon = 0,\nlat = 0, onMouseDownLat = 0,\nphi = 0, theta = 0;\n\ncontainer = document.getElementById( 'container' );\n\nlet selectedObjects = [];\nlet loader;\nlet renderPass;\nlet outlinePass;\nlet composer;\nlet effectFXAA;\nlet controlsEnabled;\nlet showingModal = false;\n\nvar havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;\n\nif (havePointerLock) {\n\tvar element = document.body;\n\tvar pointerlockchange = function(event) {\n\t\tif(showingModal) return;\n\t\tif (document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element) {\n\t\t\tcontrolsEnabled = true;\n\t\t\t// controls.enabled = true;\n\t\t\tblocker.style.display = 'none';\n\t\t} else {\n\t\t\t// controls.enabled = false;\n\t\t\tcontrolsEnabled = false;\n\t\t\tblocker.style.display = '-webkit-box';\n\t\t\tblocker.style.display = '-moz-box';\n\t\t\tblocker.style.display = 'box';\n\t\t\tinstructions.style.display = '';\n\t\t}\n\t};\n\n\tvar pointerlockerror = function(event) {\n\t\tinstructions.style.display = '';\n\t};\n\n\t// Hook pointer lock state change events\n\tdocument.addEventListener('pointerlockchange', pointerlockchange, false);\n\tdocument.addEventListener('mozpointerlockchange', pointerlockchange, false);\n\tdocument.addEventListener('webkitpointerlockchange', pointerlockchange, false);\n\n\tdocument.addEventListener('pointerlockerror', pointerlockerror, false);\n\tdocument.addEventListener('mozpointerlockerror', pointerlockerror, false);\n\tdocument.addEventListener('webkitpointerlockerror', pointerlockerror, false);\n\n\tinstructions.addEventListener('click', function(event) {\n\t\tinstructions.style.display = 'none';\n\t\t// Ask the browser to lock the pointer\n\t\tpointerLock();\n\t}, false);\n} else {\n\tinstructions.innerHTML = 'Your browser doesn\\'t seem to support Pointer Lock API';\n}\n\nfunction pointerLock() {\n\telement.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;\n\tif (/Firefox/i.test(navigator.userAgent)) {\n\t\tvar fullscreenchange = function(event) {\n\t\t\tif (document.fullscreenElement === element || document.mozFullscreenElement === element || document.mozFullScreenElement === element) {\n\t\t\t\tdocument.removeEventListener('fullscreenchange', fullscreenchange);\n\t\t\t\tdocument.removeEventListener('mozfullscreenchange', fullscreenchange);\n\t\t\t\telement.requestPointerLock();\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener('fullscreenchange', fullscreenchange, false);\n\t\tdocument.addEventListener('mozfullscreenchange', fullscreenchange, false);\n\t\telement.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;\n\t\telement.requestFullscreen();\n\t} else {\n\t\telement.requestPointerLock();\n\t}\n}\n\ninit();\nanimate();\n\n//************************************************************************//\n//                             Init Scene                                 //\n//************************************************************************//\n\nfunction init() {\n\n\tvar width = window.innerWidth || 1;\n\tvar height = window.innerHeight || 1;\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\trenderer = new THREE.WebGLRenderer( { antialias: false } );\n\trenderer.shadowMap.enabled = true;\n\trenderer.setClearColor( 0xa0a0a0 );\n\trenderer.setPixelRatio( 1 );\n\trenderer.setSize( width, height );\n\n\tcamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000 );\n\tcamera.target = new THREE.Vector3( 0, 0, 0 );\n\tscene = new THREE.Scene();\n\n\tlet geometry = new THREE.SphereGeometry( 500, 60, 400 );\n\tgeometry.scale( - 1, 1, 1 );\n\n\tlet material = new THREE.MeshBasicMaterial( {\n\t\tmap: new THREE.TextureLoader().load( 'textures/AnimusPanoramaTreated.jpg' ),\n\t\tfog: true,\n\t});\n\t\n\tmesh = new THREE.Mesh( geometry, material );\n\tmesh.name = 'scene';\n\tscene.add( mesh );\n\t\n\tstats = initStats()\n\t\n\traycaster = new THREE.Raycaster();\n\tmouse = new THREE.Vector2();\n\t\n\t// Build items for raycaster clicks\n\tbuildHotspots();\n\t\n\t\n\t// Device Orientation Stuff\t\n\tdeviceControls = new DeviceOrientationController( camera, renderer.domElement );\n\tdeviceControls.connect()\n\t\n\tsetupControllerEventHandlers( deviceControls )\n\t\n\t\n\t\n\t// if (window.DeviceOrientationEvent) {\n\t// \tconsole.log(\"Wonderful, Our browser supports DeviceOrientation\");\n\t// \twindow.addEventListener(\"deviceorientation\", deviceOrientationListener, false);\n\t// \tdeviceControls = new THREE.DeviceOrientationControls( camera, renderer.domElement );\n\t// } else {\n\t// \tconsole.log(\"Sorry, your browser doesn't support Device Orientation\");\n\t// }\n\n\t// temp sphere\n\t// var sphereMaterial = new THREE.MeshNormalMaterial();\n\t// var sphereGeometry = new THREE.SphereGeometry(200, 200, 200);\n\t// var sphere = new THREE.Mesh( sphereGeometry, sphereMaterial );\n\t// // sphere.position.set(0, 0, 0);\n\t// sphere.position.set(0, 0, 200);\n\t// // sphere.position.set(-60, 55, 0);\n\t// scene.add( sphere );\n\n\tcontrols = new THREE.PointerLockControls(camera);\n\tscene.add(controls.getObject());\n\t\n\tclock = new THREE.Clock();\n\t// renderer = new THREE.WebGLRenderer({\n\t// \tantialias: true,\n\t// \talpha: true,\n\t// });\n\t// renderer.setPixelRatio( window.devicePixelRatio );\n\t// renderer.setSize( window.innerWidth, window.innerHeight );\n\n\t// postprocessing\n\tcomposer = new THREE.EffectComposer( renderer );\n\trenderPass = new THREE.RenderPass( scene, camera );\n\tcomposer.addPass( renderPass );\n\toutlinePass = new THREE.OutlinePass( new THREE.Vector2(window.innerWidth, window.innerHeight), scene, camera);\n\n\toutlinePass.edgeStrength = 2.0;\n\toutlinePass.edgeGlow = 5.0;\n\toutlinePass.edgeThickness = 2.0;\n\toutlinePass.pulsePeriod = 0.8;\n\t// outlinePass.visibleEdgeColor = '#fffffff'; //{r: 255, g: 255, b: 255}\n\toutlinePass.visibleEdgeColor = {r: 255, g: 255, b: 255};\n\n\tcomposer.addPass( outlinePass );\n\t// @todo: prob dont need this texture but SHRUG\n\tvar onLoad = function(texture) {\n\t\toutlinePass.patternTexture = texture;\n\t\ttexture.wrapS = THREE.RepeatWrapping;\n\t\ttexture.wrapT = THREE.RepeatWrapping;\n\t};\n\tvar lod = new THREE.TextureLoader();\n\tlod.load(\n\t\t// resource URL\n\t\t'textures/tri_pattern.jpg',\n\t\t// Function when resource is loaded\n\t\tonLoad\n\t);\n\n\teffectFXAA = new THREE.ShaderPass(THREE.FXAAShader);\n\teffectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight );\n\teffectFXAA.renderToScreen = true;\n\tcomposer.addPass( effectFXAA );\n\n\tcontainer.appendChild( renderer.domElement );\n\tcontainer.addEventListener(\"mousemove\", getPosition, false);\n\t\n\tdocument.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\tdocument.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\tdocument.addEventListener( 'mouseup', onDocumentMouseUp, false );\n\tdocument.addEventListener( 'touchstart', onDocumentTouchStart, false );\n\tdocument.addEventListener( 'wheel', onDocumentMouseWheel, false );\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\t\n\tinitRain();\n\t// buildSmoke();\n\tbuildHotspot();\n\t\n\tdocument.body.appendChild( renderer.domElement );\n\n}\n\nfunction buildHotspots() {\n\tloader = new THREE.JSONLoader();\n\tloader.load('js/ac-badge-big.js', function(geometry) {\n\t// loader.load('js/ac-badge.js', function(geometry) {\n\t// loader.load('js/ac-logo.js', function(geometry) {\n\t\thotspots = hotspotObjects.map( (hotspotObject, index) => {\n\t\t\tgeometry.center();\n\n\t\t\t// previous ac-logo.js scale\n\t\t\t// let scale = 10;\n\n\t\t\tlet scale = 45;\n\n\t\t\tlet hotspot = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial( { color: '#cccccc', opacity: 1 } ));\n\t\t\thotspot.name = `hotspot-${index}`;\n\t\t\tvar box = new THREE.Box3().setFromObject(hotspot);\n\t\t\thotspot.scale.x = hotspot.scale.y = hotspot.scale.z = scale\n\t\t\thotspot.rotation.x = .5*Math.PI\n\t\t\tconsole.log('hotspotObject', hotspotObject);\n\t\t\thotspot.hotspot = hotspotObject;\n\n\t\t\t// auto generate some stuff!\n\t\t\t// {\n\t\t\t// \tcontent: {\n\t\t\t// \t\theader: '',\n\t\t\t// \t\tbody: ''\n\t\t\t// \t},\n\t\t\t// \tfeature: {\n\t\t\t// \t\ttype: 'mesh',\n\t\t\t// \t\tlocation: ''\n\t\t\t// \t},\n\t\t\t// \tposition: [-20, 0, -475],\n\t\t\t// },\n\t\t\thotspot.hotspot.content = {};\n\t\t\thotspot.hotspot.content.header = hotspot.name;\n\t\t\thotspot.hotspot.content.body = Math.random().toString(36).substring(7);\n\n\t\t\t// hotspot.scale.x = 8\n\t\t\t// hotspot.scale.y = 10\n\t\t\t// hotspot.scale.z = 8\n\t\t\t// hotspot.rotation.y = 3\n\n\t\t\tlet hitboxGeo = new THREE.BoxBufferGeometry( box.getSize().x * scale * 1.2, 200, box.getSize().x * scale * 1.2 );\n\t\t\tlet hitboxMat = new THREE.MeshBasicMaterial({wireframe: true});\n\t\t\t// // hitboxMat.visible = false\n\t\t\tlet hitboxMesh = new THREE.Mesh( hitboxGeo, hitboxMat );\n\t\t\thitboxMesh.name = `hitbox-${index}`;\n\n\t\t\tlet hotspotLocation = hotspotObject.position;\n\n\t\t\tvar group = new THREE.Group();\n\t\t\tgroup.name = `group-${index}`\n\t\t\tgroup.position.set(hotspotLocation[0], hotspotLocation[1], hotspotLocation[2]);\n\t\t\tscene.add(group);\n\t\t\tgroup.add(hotspot);\n\t\t\tgroup.add(hitboxMesh);\n\n\t\t\treturn group;\n\n\t\t});\n\t});\n}\n\nfunction buildSmoke() {\n\t// Smoke Light\n\tlet light = new THREE.DirectionalLight(0xffffff, 1.5);\n\tlight.position.set(-1, 0, 1);\n\tscene.add(light);\n\t\n\tlet directionalLight = new THREE.DirectionalLight(0xffffff);\n\tdirectionalLight.position.set(1, 1, 1).normalize();\n\tscene.add(directionalLight);\n  \n\tlet smokeTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/Smoke-Element.png');\n\tlet smokeMaterial = new THREE.MeshLambertMaterial({\n\t\tcolor: 0xffffff, \n\t\tmap: smokeTexture, \n\t\ttransparent: true\n\t});\n\tlet smokeGeo = new THREE.PlaneGeometry(500, 500);\n\t \n\tfor (let p = 0; p < 150; p++) {\n\t\tlet particle = new THREE.Mesh(smokeGeo,smokeMaterial);\n\t\tparticle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n\t\tparticle.rotation.z = Math.random() * 360;\n\t\tscene.add(particle);\n\t\tsmokeParticles.push(particle);\n\t}\t\n}\n\n\nfunction evolveSmoke() {\n\tlet sp = smokeParticles.length;\n\twhile(sp--) {\n\t\tsmokeParticles[sp].rotation.z += (delta * 0.2);\n\t}\n}\n\nfunction buildHotspot() {\n\tTHREE.ImageUtils.crossOrigin = ''; \n\t\n\t// for ( let i = 0; i < 10; i ++ ) {\n\t\t\n\t\t// let logoTexture = THREE.ImageUtils.loadTexture('/textures/animus_red_logo.png');\n\t\t// logoTexture.crossOrigin = 'anonymous';\n\t\t\n\t\t// let logoMaterial = new THREE.MeshLambertMaterial({\n\t\t// \tcolor: 0xffffff, \n\t\t// \tmap: logoTexture, \n\t\t// \ttransparent: true\n\t\t// });\n\t\t\n\t\t// let logoGeo = new THREE.PlaneGeometry(40, 60);\n\t\t// // let hotspots = [];\n\t\t\n\t\t// hotspot = new THREE.Mesh(logoGeo, logoMaterial);\n\t\t\n\t\t// // hotspot.position.x = Math.random() * 800 - 400;\n\t\t// // hotspot.position.y = 0;\n\t\t// // hotspot.position.z = -400;\n\t\t// // \n\t\t// // hotspot.scale.x = Math.random() * 2 + 1;\n\t\t// // hotspot.scale.y = Math.random() * 2 + 1;\n\t\t// // hotspot.scale.z = Math.random() * 2 + 1;\n\t\t// // \n\t\t// // hotspot.rotation.x = Math.random() * 2 * Math.PI;\n\t\t// // hotspot.rotation.y = Math.random() * 2 * Math.PI;\n\t\t// // hotspot.rotation.z = Math.random() * 2 * Math.PI;\n\t\t// hotspot.position.set(-45, 0, -400);\n\t\t// // hotspot.rotation.x = 0.1;\n\t\t// scene.add(hotspot);\n\t\t\n\t\t// hotspots.push(hotspot)\t\t\n\t// }\t\n\t\n\t let light = new THREE.DirectionalLight(0xffffff, 1.5);\n\t light.position.set(-1, 0, 1);\n\t scene.add(light);\n\t// for (let p = 0; p < 50; p++) {\n\t//     let particle = new THREE.Mesh(logoGeo, logoMaterial);\n\t//     particle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n\t//     particle.rotation.z = Math.random() * 360;\n\t//     scene.add(particle);\n\t//     hsParticles.push(particle);\n\t// }\t\n}\n\nfunction evolveHotspot() {\n\tlet hs = hsParticles.length;\n\twhile(hs--) {\n\t\thsParticles[hs].rotation.z += (delta * 0.2);\n\t}\n}\n\nfunction initRain() {\n\trainGeometry = new THREE.Geometry();\n\n\tlet sprite1 = THREE.ImageUtils.loadTexture( \"textures/rain1.png\" ),\n\tsprite2 = THREE.ImageUtils.loadTexture( \"textures/rain2.png\" ),\n\tsprite3 = THREE.ImageUtils.loadTexture( \"textures/rain3.png\" ),\n\tsprite4 = THREE.ImageUtils.loadTexture( \"textures/rain4.png\" ),\n\tsprite5 = THREE.ImageUtils.loadTexture( \"textures/rain5.png\" );\n\n\tfor (let i = 0; i < rainDensity; i++ ) {\n\t\tlet vertex = new THREE.Vector3();\n\t\tvertex.x = Math.random() * 2000 - 1000;\n\t\tvertex.y = Math.random() * 4000 + 500;\n\t\tvertex.z = Math.random() * 2000 - 1000;\n\n\t\trainGeometry.vertices.push( vertex );\n\t}\n\n\tparameters = [ [ [1.0, 0.2, 0.5], \tsprite2, 20 ],\n\t\t\t\t   [ [0.95, 0.1, 0.5], \tsprite3, 15 ],\n\t\t\t\t   [ [0.90, 0.05, 0.5], sprite1, 10 ],\n\t\t\t\t   [ [0.85, 0, 0.5], \tsprite5, 8 ],\n\t\t\t\t   [ [0.80, 0, 0.5], \tsprite4, 5 ],\n\t\t\t\t   ];\n\n\tfor (let i = 0; i < parameters.length; i++ ) {\n\n\t\tcolor  = parameters[i][0];\n\t\tsprite = parameters[i][1];\n\t\tsize   = parameters[i][2];\n\n\t\tmaterials[i] = new THREE.PointCloudMaterial({ \n\t\t\tsize: size, \n\t\t\tmap: sprite, \n\t\t\tblending: THREE.AdditiveBlending, \n\t\t\tdepthTest: false, \n\t\t\ttransparent : true \n\t\t});\n\t\tmaterials[i].color.setHSL( color[0], color[1], color[2] );\n\n\t\tparticles = new THREE.PointCloud( rainGeometry, materials[i] );\n\n\t\tparticles.rotation.z = Math.random() * 0.20 + 0.10;\n\n\t\tscene.add( particles );\n\t}\n}\n\nfunction animateRain() {\n\t// console.log(\"I'M ANIMATING THINGS\");\n\tlet time = Date.now() * 0.00005;\n\n\tfor (let i = 0; i < scene.children.length; i++ ) {\n\n\t\tlet object = scene.children[i];\n\t\t\n\t\tif ( object instanceof THREE.PointCloud ) {\n\t\t\t// Not getting into the log here\n\t\t\tconsole.log(\"I'M ANIMATING THINGS\");\n\t\t\tif (i == 0) {\n\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif (i > 0) {\n\t\t\t\tif (layer)\n\t\t\t\t\tobject.translateY(-10);\n\t\t\t\telse\n\t\t\t\t\tif(scene.children[i-1].position.y < ((window.innerHeight * -1) / 2 - 1000))\n\t\t\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif ((object.position.y < window.innerHeight * -1 * 5)) {\n\t\t\t\t\tobject.position.y = 500;\n\t\t\t\t\tobject.position.x = 0;\n\t\t\t\t\tif (i == 0) layer = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = 0; i < materials.length; i++ ) {\n\n\t\tcolor = parameters[i][0];\n\n\t\th = ( 360 * ( color[0] + time ) % 360 ) / 360;\n\t\tmaterials[i].color.setHSL( h, color[1], color[2] );\n\n\t}\n}\n\nfunction onWindowResize() {\n\tvar width = window.innerWidth || 1;\n\tvar height = window.innerHeight || 1;\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\tcamera.aspect = width / height;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( width, height );\n\tcomposer.setSize( width, height );\n\teffectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight );\n}\n\nfunction onDocumentTouchStart( event ) {\n\tevent.preventDefault();\n\tevent.clientX = event.touches[0].clientX;\n\tevent.clientY = event.touches[0].clientY;\n\tonDocumentMouseDown( event );\n}\n\nfunction addSelectedObject(object) {\n\tselectedObjects = [];\n\tselectedObjects.push(object);\n}\n\nfunction checkRaycasterCollisions() {\n\traycaster.setFromCamera(mouse, camera);\n\tlet intersects = raycaster.intersectObjects(scene.children, true);\n\t// @todo: we need to add deselect here\n\tlet items = intersects.filter( intersect => intersect.object.name.match(/hitbox/) )\n\tif(items.length) {\n\t\titems.forEach((item) => {\n\t\t\tlet target = item.object.parent.children[0]\n\t\t\tif(selectedObjects.indexOf(target) === -1) {\n\t\t\t\taddSelectedObject(target);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tselectedObjects = [];\n\t}\n\toutlinePass.selectedObjects = selectedObjects;\n}\n\nfunction hideModal() {\n\tfor(var i in buttons) {\n\t\tbuttons[i].set(0);\n\t}\n\tlet duration = 550/1000\n\tshowingModal = false;\n\tpointerLock();\n\tTweenMax.to($('.modal-container') , 0.3, {autoAlpha: 0})\n\tTweenMax.to(camera, duration, {fov: fovMin, onComplete: function() {\n\t\tblocked = false;\n\t}});\n\t$('.button-outer').trigger('mouseleave');\n}\n\nfunction renderFeatureMesh() {\n\tvar feature = $('.feature');\n\n\tif(feature.find('canvas').length) return;\n\tvar scene = new THREE.Scene();\n\tvar camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n\n\tvar renderer = new THREE.WebGLRenderer();\n\trenderer.setSize(feature.width(), feature.height());\n\tfeature.append(renderer.domElement);\n\n\tvar geometry = new THREE.CubeGeometry(5, 5, 5);\n\tvar material = new THREE.MeshLambertMaterial({\n\t\tcolor: 0x00fff0\n\t});\n\tvar cube = new THREE.Mesh(geometry, material);\n\tscene.add(cube);\n\n\tcamera.position.z = 12;\n\n\tvar pointLight = new THREE.PointLight(0xFFFFFF);\n\n\tpointLight.position.x = 10;\n\tpointLight.position.y = 50;\n\tpointLight.position.z = 130;\n\n\tscene.add(pointLight);\n\n\tvar reqAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame;\n\n\tvar render = function() {\n\t\treqAnimFrame(render);\n\n\t\tvar delta = Math.random() * (0.06 - 0.02) + 0.02;\n\n\t\tcube.rotation.x += delta;\n\t\tcube.rotation.y += delta;\n\t\tcube.rotation.z -= delta;\n\n\t\trenderer.render(scene, camera);\n\t};\n\n\trender();\n}\n\nfunction spawnModal(hotspot) {\n\t$('.modal-container').css({top: 0})\n\t$('.modal-container .close').on('click', hideModal);\n\n\t$('.overlay').on('click', hideModal);\n\t$(document).on('keydown', (event) => {\n\t\tif(event.charCode === 0) {\n\t\t\thideModal();\n\t\t} \n\t})\n\t$('.modal .content h1').text(hotspot.content.header);\n\t$('.modal .content p').text(hotspot.content.body);\n\trenderFeatureMesh();\n}\n\nfunction onDocumentMouseDown( event ) {\n\n\tif(!controlsEnabled) return;\n\n\tif(selectedObjects.length) {\n\t\tconsole.log('DO STUFF', );\n\t\tlet hotspot = selectedObjects[0].hotspot;\n\t\tlet duration = 550/1000\n\t\tshowingModal = true;\n\t\tcontrolsEnabled = false;\n\t\tdocument.exitPointerLock();\n\t\tTweenMax.to($('.modal-container') , 0.3, {autoAlpha: 1})\n\t\tTweenMax.to(camera, duration, {fov: fovMax, onComplete: spawnModal(hotspot)})\n\t\t// selectedObjects[0]\n\t}\n}\n\nfunction rotateHotspots() {\n\thotspots.forEach( hotspot => hotspot.rotation.y += rotateSpeed * 0.5 );\n}\n\nfunction onDocumentMouseMove( event ) {\n\tisUserInteracting = true;\n\t\n\tvar movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\n\tvar movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\n\n\tif(controlsEnabled) {\n\t\tcurPosX += movementX;\n\t\tlon = curPosX\n\t}\n\t// if ( isUserInteracting === true ) {\n\t// \tlon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;\n\t// \t// lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;\n\t// }\n}\n\nfunction onDocumentMouseUp( event ) {\n\tisUserInteracting = false;\n}\n\n// Zoom in & out | Need to limit this to the starting point and a endind point\nfunction onDocumentMouseWheel( event ) {\n\tif (camera.fov > 75) {\n\t\tcamera.fov = 75\n\t} else {\n\t\tcamera.fov += event.deltaY * 0.02;\n\t\tcamera.updateProjectionMatrix();\n\t}\n\t// camera.fov += event.deltaY * 0.02;\n\t// camera.updateProjectionMatrix();\n}\n\nfunction animate() {\n\trequestAnimationFrame( animate );\n\tupdate();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n}\n\nfunction update() {\n\t// if ( isUserInteracting === false ) {\n\t// \t// lon += 0.1;\n\t// }\n\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\tphi = THREE.Math.degToRad( 90 - lat );\n\ttheta = THREE.Math.degToRad( lon );\n\n\tcamera.target.x = 500 * Math.sin( phi ) * Math.cos( theta );\n\t// camera.target.y = 500 * Math.cos( phi );\n\tcamera.target.z = 500 * Math.sin( phi ) * Math.sin( theta );\n\tcamera.lookAt( camera.target );\n\n\t/*\n\t// distortion\n\tcamera.position.copy( camera.target ).negate();\n\t*/\n\t// let delta = clock.getDelta(), speed = delta * CAMERAMOVESPEED;\n\t// controls.update(delta);\n\t// spotLight.target = marker;\n\t// controls.update()\n\t\n\t// spotLightHelper.update()\n\tstats.update()\n\tdelta = clock.getDelta();\n\n\tevolveSmoke();\n\tevolveHotspot();\n\t// animateRain();\n\t// rotateHotspot();\n\trotateHotspots();\n\n\tcheckRaycasterCollisions();\n\t// rainEngine.update(0.01 * 0.5)\n\ttheta += 0.1;\n\t// let radius = 600;\n\t// camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );\n\t// camera.position.y = radius * Math.sin( THREE.Math.degToRad( theta ) );\n\t// camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );\n\t// camera.lookAt( scene.position );\n\t// if (window.innerWidth < 800) {\n\t// \tdeviceControls.update();\n\t// }\n\t\n\t// if (window.innerWidth < 768) {\n\t\t// deviceControls.update()\n\t\t// camera.lookAt(deviceControls.gamma)\n\t\t// console.log(deviceControls);\n\t\t\n\t\t// sconsole.log(\"DEVICE CONTROLS\", deviceControls);\n\t\t// deviceControls.alpha = 0\n\t\t// deviceControls.beta = 180\n\t\t// deviceControls.gamma = 90\n\t\t// deviceControls.updateAlphaOffsetAngle(0);\n\t// }\n\t\n\t// if (window.DeviceOrientationEvent) {\n\t// \twindow.addEventListener('deviceorientation', function(event) {\n\t// \t\tlet alpha = event.alpha;\n\t// \t\tlet beta = event.beta;\n\t// \t\tlet gamma = event.gamma;\n\t// \t\t// console.log(\"We on Mobile\")\n\t// \t\t// console.log(\"GAMMA\" gamma);\n\t// \t\tdeviceControls.update();\n\t// \t\t// Do something\n\t// \t}, false);\n\t// }\n\t\n\tdeviceControls.update()\n\t\n\t// deviceControls.connect();\n\trenderer.render( scene, camera );\n\t// renderer.render( scene, camera );\n\tcamera.updateProjectionMatrix();\n\tcomposer.render();\n\t// renderer.autoClear = true;\n\t// renderer.setClearColor( 0xfff0f0 );\n\t// renderer.setClearAlpha( 0.0 );\n}\n\nfunction getPosition(event) {\n\tlet x = new Number();\n\tlet y = new Number();\n\t\n\tif (event.x != undefined && event.y != undefined) {\n\t\tx = event.x;\n\t\ty = event.y;\n\t} else { // Firefox method to get the position\n\t\tx = event.clientX + document.body.scrollLeft +\n\t\tdocument.documentElement.scrollLeft;\n\t\ty = event.clientY + document.body.scrollTop +\n\t\tdocument.documentElement.scrollTop;\n\t}\n\tx -= container.offsetLeft;\n\ty -= container.offsetTop;\t\n\t// alert(\"x: \" + x + \"  y: \" + y);\n\tconsole.log(\"x: \" + x + \"  y: \" + y);\n}\n\nTweenLite.ticker.addEventListener(\"tick\", render);\n\nfunction initStats() {\n\t// stats.setMode(0); // 0: fps, 1: ms\n\t// Align top-left\n\tstats = new Stats();\n\tstats.domElement.style.position = 'absolute';\n\t// stats.domElement.style.bottom = '0px';\n\tstats.domElement.style.left = '0px';\n\tstats.domElement.style.top = '0px';\n\tstats.domElement.style.zIndex = 100;\n\tcontainer.appendChild(stats.domElement);\n\treturn stats;\n}\n\n\nfunction deviceOrientationListener(event) {\n\tlet deg2rad = Math.PI / 180;\n\tcamera.rotation.set(\n        !event.beta * deg2rad,\n        !event.gamma ? 0 : event.gamma * deg2rad,\n        !event.alpha ? 0 : event.alpha * deg2rad\n    );\n\t\n\tconsole.log(event.beta * deg2rad)\n\tconsole.log(event.gamma * deg2rad)\n\tconsole.log(event.alpha * deg2rad)\n\t\n        // console.log(\"Do Stuff With Device\", event);\n        // ctx.clearRect(0, 0, c.width, c.height);\n        // ctx.fillStyle = \"#FF7777\";\n        // ctx.font = \"14px Verdana\";\n        // ctx.fillText(\"Alpha: \" + Math.Round(event.alpha), 10, 20);\n        // ctx.beginPath();\n        // ctx.moveTo(180, 75);\n        // ctx.lineTo(210, 75);\n        // ctx.arc(180, 75, 60, 0, event.alpha * Math.PI / 180);\n        // ctx.fill();\n\t\t// \n        // ctx.fillStyle = \"#FF6600\";\n        // ctx.fillText(\"Beta: \" + Math.round(event.beta), 10, 140);\n        // ctx.beginPath();\n        // ctx.fillRect(180, 150, event.beta, 90);\n\t\t// \n        // ctx.fillStyle = \"#FF0000\";\n        // ctx.fillText(\"Gamma: \" + Math.round(event.gamma), 10, 270);\n        // ctx.beginPath();\n        // ctx.fillRect(90, 340, 180, event.gamma);\n}\n\n//DeviceOrientationController event handling\nfunction setupControllerEventHandlers( controls ) {\n\t\n\tvar controllerEl = document.querySelector( '#controllername' );\n\tvar controllerDefaultText = controllerEl.textContent;\n\tvar controllerSelectorEl = document.querySelector( '#controllertype' );\n\tvar compassCalibrationPopupEl = document.querySelector( '#calibrate-compass-popup' );\n\t\n\t// Listen for manual interaction (zoom OR rotate)\t\n\tcontrols.addEventListener( 'userinteractionstart', function () {\n\t\trenderer.domElement.style.cursor = 'move';\n\t\tcontrollerSelectorEl.style.display = 'none';\n\t});\n\t\n\tcontrols.addEventListener( 'userinteractionend', function () {\n\t\trenderer.domElement.style.cursor = 'default';\n\t\tcontrollerSelectorEl.style.display = 'inline-block';\n\t});\n\t\n\t// Listen for manual rotate interaction\t\n\tcontrols.addEventListener( 'rotatestart', function () {\n\t\tcontrollerEl.innerText = 'Manual Rotate';\n\t});\n\t\n\tcontrols.addEventListener( 'rotateend', function () {\n\t\tcontrollerEl.innerText = controllerDefaultText;\n\t});\n\t\n\t// Listen for manual zoom interaction\n\tcontrols.addEventListener( 'zoomstart', function () {\n\t\tcontrollerEl.innerText = 'Manual Zoom';\n\t});\n\t\n\tcontrols.addEventListener( 'zoomend', function () {\n\t\tcontrollerEl.innerText = controllerDefaultText;\n\t});\n\t\n\t// Allow advanced switching between 'Quaternions' and 'Rotation Matrix' calculations\n\tcontrollerSelectorEl.addEventListener( 'click', function ( event ) {\n\t\tevent.preventDefault();\n\t\t\n\t\tif ( controls.useQuaternions === true ) {\n\t\t\tcontrollerSelectorEl.textContent = 'Rotation Matrix';\n\t\t\tcontrols.useQuaternions = false;\n\t\t} else {\n\t\t\tcontrollerSelectorEl.textContent = 'Quaternions';\n\t\t\tcontrols.useQuaternions = true;\n\t\t}\n\t}, false);\n}"]}
>>>>>>> master
