{"version":3,"sources":["index.js"],"names":["camera","scene","renderer","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLat","onMouseDownLon","lon","lat","phi","theta","fovMin","fovMax","zoomed","onPointerDownPointerX","onPointerDownPointerY","onPointerDownLon","onPointerDownLat","selected","controls","timeline","init","animate","container","mesh","document","getElementById","THREE","PerspectiveCamera","window","innerWidth","innerHeight","target","Vector3","Math","max","min","degToRad","x","sin","cos","lookAt","Scene","add","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","Mesh","spotLight","SpotLight","PI","castShadow","position","set","shadowMapWidth","shadowMapHeight","shadowCameraNear","shadowCameraFar","marker","Object3D","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","TrackballControls","rotateSpeed","zoomSpeed","panSpeed","noZoom","noPan","staticMoving","dynamicDampingFactor","enabled","TweenLite","ticker","addEventListener","render","TimelineLite","onStart","removeEventListener","update","onComplete","position0","copy","reset","onDocumentMouseUp","onWindowResize","mouseDown","startX","startY","easing","getDistance","object","helper","BoundingBoxHelper","width","height","y","vFOV","fov","ratio","tan","screen","aspect","size","distance","box","z","pos","speed","parent","clone","localToWorld","clear","to","ease","rotation","zoom","worldToLocal","e","touches","clientX","clientY","mouse","vector","unproject","raycaster","Raycaster","sub","normalize","intersects","intersectObject","length","console","log","updateProjectionMatrix","onDocumentMouseDown","event","preventDefault","onDocumentMouseWheel","deltaY","onDocumentMouseMove","onDocumentClick","tween","start","requestAnimationFrame","time","orbit","origin","h","v","p"],"mappings":"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","file":"app.js","sourcesContent":["let camera;\nlet scene;\nlet renderer;\nlet isUserInteracting = false;\nconst onMouseDownMouseX = 0;\nconst onMouseDownMouseY = 0;\nconst onMouseDownLat = 0;\nconst onMouseDownLon = 0;\nlet lon = 30;\nlet lat = 0;\nlet phi = 0;\nlet theta = 0;\nlet fovMin = 75;\nlet fovMax = 55;\nlet zoomed;\n\nlet onPointerDownPointerX;\nlet onPointerDownPointerY;\nlet onPointerDownLon;\nlet onPointerDownLat;\n\nlet selected;\nlet controls;\nlet timeline;\n\n\ninit();\nanimate();\n\nfunction init() {\n\tlet container;\n\tlet mesh;\n\tcontainer = document.getElementById('container');\n\tcamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100);\n\t// camera.position.set( 0, 0, 60 );\n\tcamera.target = new THREE.Vector3(0, 0, 0);\n\n\tlat = Math.max(-85, Math.min(85,lat));\n\tphi = THREE.Math.degToRad(90-lat);\n\ttheta = THREE.Math.degToRad(lon);\n\tcamera.target.x = 500 * Math.sin(phi) * Math.cos(theta);\n\tcamera.lookAt(camera.target);\n\n\tscene = new THREE.Scene();\n\tscene.add(camera)\n\tconst geometry = new THREE.SphereGeometry(500, 60, 40);\n\tgeometry.scale(-1, 1, 1);\n\tconst material = new THREE.MeshBasicMaterial({\n\t\tmap: new THREE.TextureLoader().load('textures/AnimusPanorama.jpg')\n\t});\n\tmesh = new THREE.Mesh(geometry, material);\n\tscene.add(mesh);\n\n\t// add light\n\t// let light = new THREE.DirectionalLight('white', 1);\n\t// light.position.set(-4,4,4);\n\t// light.name = 'Back light';\n\t// scene.add(light);\n\t\n\t// Add spotlight for case focus\n\tlet spotLight = new THREE.SpotLight(0xffffff, 2.2, 1000, Math.PI/10.5, 0.001);\n\tspotLight.castShadow = true;\n\tspotLight.position.set(52, 75, 50);\n\tspotLight.shadowMapWidth = 1024;\n\tspotLight.shadowMapHeight = 1024;\n\tspotLight.shadowCameraNear = 1;\n\tspotLight.shadowCameraFar = 1000;\n\tscene.add(spotLight);\n\t\n\t// Add marker to set initial position for click\n\tlet marker = new THREE.Object3D();\n\tmarker.position.set(0,0,0);\n\tmarker.add(spotLight);\n\tscene.add(marker);\n\n\t// add a sphere to click\n\t// let mat2 = new THREE.MeshLambertMaterial({side: THREE.DoubleSide, color: '#f4d742'});\n\t// let object = new THREE.Mesh(new THREE.SphereGeometry(4,20,20),mat2);\n\t// object.position.set( 40, 0, 0 );\n\t// object.name = 'Object 1';\n\t// scene.add(object);\n\n\trenderer = new THREE.WebGLRenderer();\n\trenderer.setPixelRatio(window.devicePixelRatio);\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\tcontainer.appendChild(renderer.domElement);\n\n\t// set up controls\n\tcontrols = new THREE.TrackballControls(camera);\n\tcontrols.rotateSpeed = 3.6;\n\tcontrols.zoomSpeed = 0.8;\n\tcontrols.panSpeed = 1;\n\tcontrols.noZoom = false;\n\tcontrols.noPan = false;\n\tcontrols.staticMoving = false;\n\tcontrols.dynamicDampingFactor = 0.12;\n\tcontrols.enabled = true;\n\t\n\tTweenLite.ticker.addEventListener('tick', render );\n\n\ttimeline = new TimelineLite({\n\t\tonStart: function(){\n\t\t\tTweenLite.ticker.removeEventListener(\"tick\", controls.update );\n\t\t\tcontrols.enabled = false;\n\t\t},\n\t\tonComplete: function(){\n\t\t\tTweenLite.ticker.addEventListener(\"tick\", controls.update );\n\t\t\tcontrols.position0.copy(camera.position);\n\t\t\tcontrols.reset();\n\t\t\tcontrols.enabled = true;\n\t\t}\n\t});\n\n\t// set up click handlers\n\t// document.addEventListener('mousedown', onDocumentMouseDown, false);\n\t// document.addEventListener('mousemove', onDocumentMouseMove, false);\n\tdocument.addEventListener('mouseup', onDocumentMouseUp, false);\n\twindow.addEventListener('resize', onWindowResize, false);\n\tdocument.addEventListener('mousedown', mouseDown, false);\n\tTweenLite.ticker.addEventListener(\"tick\", controls.update);\n\t\n}\n\nlet startX\nlet startY\nlet easing = 'Expo.easeInOut';\n\nfunction getDistance(object) {\n\tconst helper = new THREE.BoundingBoxHelper(object, 0xff0000);\n\thelper.update();\n\n\tlet width = helper.scale.x;\n\tlet height = helper.scale.y;\n\n\t// Set camera distance\n\tconst vFOV = camera.fov * Math.PI / 180;\n\n\tconst ratio = 2 * Math.tan( vFOV / 2 );\n\tconst screen = ratio * camera.aspect;\n\tconst size = Math.max(height,width);\n\tconst distance = (size / screen) + (helper.box.max.z / screen);\n\n\treturn distance;\n};\n\nfunction reset() {\n\n\tvar pos = { x: 0, y: 0 };\n\tconst distance = 60;\n\tconst speed = 1;\n \n\tif ( camera.parent !== scene ) {\n\t\tvar pos = camera.position.clone();\n\t\tcamera.parent.localToWorld(camera.position);\n\t\tscene.add(camera);\n\t}\n \n\ttimeline.clear();\n\ttimeline.to( camera.position, speed, { \n\tx: pos.x, \n\ty: pos.y, \n\tz: distance, \n\tease: easing \n\t}, 0);\n \ttimeline.to( camera.rotation, speed, { x: 0, y: 0, z: 0, ease: easing}, 0);\n\n}; \n\nfunction zoom(object) {\n\n\tconst pos = camera.position.clone();\n\tobject.worldToLocal(camera.position);\n\tobject.add(camera);\n\n\tconst speed = 1;\n\ttimeline.clear();\n\n\ttimeline.to( camera.position, speed, {\n\t\tx: pos.x,\n\t\ty: pos.y,\n\t\tz: getDistance(object),\n\t\tease: easing\n\t},0);\n\n};\n\nfunction mouseDown(e) {\n\tconst x = ( e.touches ? e.touches[0].clientX : e.clientX );\n\tconst y = ( e.touches ? e.touches[0].clientY : e.clientY );\n\tconst mouse = {\n\t\tx: ( x / window.innerWidth ) * 2 - 1,\n\t\ty: - ( y / window.innerHeight ) * 2 + 1\n\t};\n\tconst vector = new THREE.Vector3( mouse.x, mouse.y ).unproject( camera );\n\tconst raycaster = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize());\n\tconst intersects = raycaster.intersectObject( scene, true );\n\tif(intersects.length > 0 && intersects[ 0 ].object !== selected) {\n\t\tselected = intersects[ 0 ].object;\n\t\tconsole.log(selected);\n\t\tzoom(selected);\n\t} else {\n\t\tselected = null;\n\t\tcamera.reset(); \n\t}\n}\n\nfunction onWindowResize() {\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n}\n\nfunction onDocumentMouseDown(event) {\n\tevent.preventDefault();\n\tisUserInteracting = true;\n\tonPointerDownPointerX = event.clientX;\n\tonPointerDownPointerY = event.clientY;\n\tonPointerDownLon = lon;\n\tonPointerDownLat = lat;\n}\n\nfunction onDocumentMouseWheel( event ) {\n\tconsole.log('event', camera.fov)\n\n\tcamera.fov += event.deltaY * 0.05;\n\tcamera.updateProjectionMatrix();\n\n}\n\nfunction onDocumentMouseMove(event) {\n\tif (isUserInteracting === true) {\n\t\tlon = (onPointerDownPointerX - event.clientX) * 0.1 + onPointerDownLon;\n\t}\n}\n\nfunction onDocumentMouseUp(event) {\n\tisUserInteracting = false;\n}\n\nfunction onDocumentClick(event) {\n\tcamera.fov = zoomed ? fovMin : fovMax\n\t// i = zoomed ? -1 : 1\n\tzoomed = !zoomed\n\ttween\n\t// .onUpdate(() => {\n\t// \tcamera.fov = \n\t// })\n\t.start();\n\n\n\t// int = setInterval(() => {\n\t// \tval = val + 0.05*i;\n\t// \tcamera.fov = val;\n\t// \ti++;\n\t// \tconsole.log(val);\n\t// \tif(val > 85) {\n\t// \t\tclearInterval(int)\n\t// \t}\n\t// },30);\n}\n\n// var coords = { x: 0, y: 0 };\n// var tween = new TWEEN.Tween({x: 75})\n//     .to({x: 85}, 1000)\n//     .onUpdate(function() {\n//     \tcamera.fov = this.x\n//     })\n\nfunction animate() {\n\trequestAnimationFrame(animate);\n\tupdate();\n}\n\nfunction render() {\n\trenderer.render(scene, camera);\n}\n\nfunction update(time) {\n\tlat = Math.max(-85, Math.min(85, lat));\n\tphi = THREE.Math.degToRad(90 - lat);\n\ttheta = THREE.Math.degToRad(lon);\n\tcamera.target.x = 500 * Math.sin(phi) * Math.cos(theta);\n\tcamera.target.y = 500 * Math.cos(phi);\n\tcamera.target.z = 500 * Math.sin(phi) * Math.sin(theta);\n\tcamera.lookAt(camera.target);\n\t// TWEEN.update(time);\n\t// camera.fov = camera.fov += 0.1 \n\t// console.log(camera.fov)\n\tcamera.updateProjectionMatrix();\n\trender();\n}\n\nfunction  orbit(origin, h, v, distance) {    \n\torigin = origin || new THREE.Vector3();    \n\tvar p = new THREE.Vector3();    \n\tvar phi = v * Math.PI / 180;    \n\tvar theta = h * Math.PI / 180;    \n\tp.x = (distance * Math.sin(phi) * Math.cos(theta)) + origin.x;    \n\tp.z = (distance * Math.sin(phi) * Math.sin(theta)) + origin.z;    \n\tp.y = (distance * Math.cos(phi)) + origin.y;    \n\treturn p;\n}\n"]}