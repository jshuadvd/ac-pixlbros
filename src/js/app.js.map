{"version":3,"sources":["index.js"],"names":["lon","fovMin","fovMax","onPointerDownPointerX","onPointerDownLon","audio","document","createElement","source","src","appendChild","play","camera","container","color","controls","clock","delta","h","info","layer","logoGeo","logoMaterial","logoMesh","logoTexture","marker","mesh","materials","mousePos","parameters","particles","rainDensity","rainGeometry","renderer","raycaster","scene","size","smokeParticles","spotLight","spotLightHelper","sprite","stats","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLon","lat","onMouseDownLat","phi","theta","getElementById","init","initRain","animate","THREE","PerspectiveCamera","window","innerWidth","innerHeight","target","Vector3","Scene","fog","Fog","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","Mesh","add","PointerLockControls","getObject","Clock","PlaneGeometry","ImageUtils","crossOrigin","loadTexture","MeshLambertMaterial","opacity","light","DirectionalLight","position","set","smokeTexture","smokeMaterial","transparent","smokeGeo","p","particle","Math","random","rotation","z","push","WebGLRenderer","antialias","alpha","setPixelRatio","devicePixelRatio","setSize","domElement","addEventListener","getPosition","onDocumentMouseMove","onDocumentMouseUp","onDocumentMouseWheel","event","preventDefault","dataTransfer","dropEffect","body","style","reader","FileReader","image","result","needsUpdate","readAsDataURL","files","onWindowResize","Stats","bottom","zIndex","Geometry","sprite1","sprite2","sprite3","sprite4","sprite5","i","vertex","x","y","vertices","length","PointCloudMaterial","blending","AdditiveBlending","depthTest","setHSL","PointCloud","animateRain","time","Date","now","children","object","console","log","translateY","aspect","updateProjectionMatrix","clientX","fov","deltaY","requestAnimationFrame","update","max","min","degToRad","sin","cos","lookAt","getDelta","evolveSmoke","render","sp","Number","undefined","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,MAAM,EAAV;AACA;AACA;AACA;AACA,IAAIC,SAAS,EAAb;AACA,IAAIC,SAAS,EAAb;AACA;AACA;AACA,IAAIC,8BAAJ;AACA;AACA,IAAIC,yBAAJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"app.js","sourcesContent":["// let camera;\n// let scene;\n// let renderer;\n// let isUserInteracting = false;\n// const onMouseDownMouseX = 0;\n// const onMouseDownMouseY = 0;\n// const onMouseDownLat = 0;\n// const onMouseDownLon = 0;\nlet lon = 30;\n// let lat = 0;\n// let phi = 0;\n// let theta = 0;\nlet fovMin = 75;\nlet fovMax = 55;\n// let zoomed;\n// \nlet onPointerDownPointerX;\n// let onPointerDownPointerY;\nlet onPointerDownLon;\n// let onPointerDownLat;\n// \n// let selected;\n// let controls;\n// let timeline;\n// \n// // Init audio \n// let audio = document.getElementById('player');\n// audio.play();\n// audio.volume = 1;\n// audio.crossOrigin = \"anonymous\";\n// \n// \n// init();\n// animate();\n// \n// function init() {\n// \tlet container;\n// \tlet mesh;\n// \tcontainer = document.getElementById('container');\n// \tcamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1500);\n// \t// camera.position.set( 0, 0, 60 );\n// \tcamera.target = new THREE.Vector3(0, 0, 0);\n// \n// \tlat = Math.max(-85, Math.min(85,lat));\n// \tphi = THREE.Math.degToRad(90-lat);\n// \ttheta = THREE.Math.degToRad(lon);\n// \tcamera.target.x = 500;\n// \tcamera.lookAt(camera.target);\n// \n// \tscene = new THREE.Scene();\n// \tscene.add(camera)\n// \tconst geometry = new THREE.SphereGeometry(500, 60, 40);\n// \tgeometry.scale(-1, 1, 1);\n// \tconst material = new THREE.MeshBasicMaterial({\n// \t\tmap: new THREE.TextureLoader().load('textures/AnimusPanorama.jpg')\n// \t});\n// \tmesh = new THREE.Mesh(geometry, material);\n// \tmesh.name = 'scene';\n// \tscene.add(mesh);\n// \t\n// \n// \n// \t// add light\n// \t// let light = new THREE.DirectionalLight('white', 1);\n// \t// light.position.set(-4,4,4);\n// \t// light.name = 'Back light';\n// \t// scene.add(light);\n// \t\n// \t// Add spotlight for case focus\n// \t// let spotLight = new THREE.SpotLight(0xffffff, 2.2, 1000, Math.PI/10.5, 0.001);\n// \t// spotLight.castShadow = true;\n// \t// spotLight.position.set(52, 75, 50);\n// \t// spotLight.shadowMapWidth = 1024;\n// \t// spotLight.shadowMapHeight = 1024;\n// \t// spotLight.shadowCameraNear = 1;\n// \t// spotLight.shadowCameraFar = 1000;\n// \t// scene.add(spotLight);\n// \t\n// \t// Add marker to set initial position for click\n// \tlet marker = new THREE.Object3D();\n// \tmarker.position.set(0,0,0);\n// \t// marker.add(spotLight);\n// \tscene.add(marker);\n// \n// \t// add a sphere to click\n// \t// let mat2 = new THREE.MeshLambertMaterial({side: THREE.DoubleSide, color: '#f4d742'});\n// \t// let object = new THREE.Mesh(new THREE.SphereGeometry(4,20,20),mat2);\n// \t// object.position.set( 40, 0, 0 );\n// \t// object.name = 'Object 1';\n// \t// scene.add(object);\n// \n// \trenderer = new THREE.WebGLRenderer();\n// \trenderer.setPixelRatio(window.devicePixelRatio);\n// \trenderer.setSize(window.innerWidth, window.innerHeight);\n// \tcontainer.appendChild(renderer.domElement);\n// \n// \t// set up controls\n// \tcontrols = new THREE.TrackballControls(camera);\n// \tcontrols.rotateSpeed = 3.6;\n// \tcontrols.zoomSpeed = 0.8;\n// \tcontrols.panSpeed = 1;\n// \tcontrols.noZoom = false;\n// \tcontrols.noPan = false;\n// \tcontrols.staticMoving = false;\n// \tcontrols.dynamicDampingFactor = 0.12;\n// \tcontrols.enabled = true;\n// \t\n// \tTweenLite.ticker.addEventListener('tick', render );\n// \n// \ttimeline = new TimelineLite({\n// \t\tonStart: function(){\n// \t\t\tTweenLite.ticker.removeEventListener(\"tick\", controls.update );\n// \t\t\tcontrols.enabled = false;\n// \t\t},\n// \t\tonComplete: function(){\n// \t\t\tTweenLite.ticker.addEventListener(\"tick\", controls.update );\n// \t\t\tcontrols.position0.copy(camera.position);\n// \t\t\tcontrols.reset();\n// \t\t\tcontrols.enabled = true;\n// \t\t}\n// \t});\n// \n// \t// set up click handlers\n// \t// document.addEventListener('mousedown', onDocumentMouseDown, false);\n// \t// document.addEventListener('mousemove', onDocumentMouseMove, false);\n// \tdocument.addEventListener('mouseup', onDocumentMouseUp, false);\n// \twindow.addEventListener('resize', onWindowResize, false);\n// \tdocument.addEventListener('mousedown', mouseDown, false);\n// \tTweenLite.ticker.addEventListener(\"tick\", controls.update);\n// \t\n// }\n// \n// let startX\n// let startY\n// let easing = 'Expo.easeInOut';\n// \n// function getDistance(object) {\n// \tconst helper = new THREE.BoundingBoxHelper(object, 0xff0000);\n// \thelper.update();\n// \n// \tlet width = helper.scale.x;\n// \tlet height = helper.scale.y;\n// \n// \t// Set camera distance\n// \tconst vFOV = camera.fov * Math.PI / 180;\n// \n// \tconst ratio = 2 * Math.tan( vFOV / 2 );\n// \tconst screen = ratio * camera.aspect;\n// \tconst size = Math.max(height,width);\n// \tconst distance = (size / screen) + (helper.box.max.z / screen);\n// \n// \treturn distance;\n// };\n// \n// function reset() {\n// \n// \tvar pos = { x: 0, y: 0 };\n// \tconst distance = 60;\n// \tconst speed = 1;\n//  \n// \tif ( camera.parent !== scene ) {\n// \t\tvar pos = camera.position.clone();\n// \t\tcamera.parent.localToWorld(camera.position);\n// \t\tscene.add(camera);\n// \t}\n//  \n// \ttimeline.clear();\n// \ttimeline.to( camera.position, speed, { \n// \tx: pos.x, \n// \ty: pos.y, \n// \tz: distance, \n// \tease: easing \n// \t}, 0);\n//  \ttimeline.to( camera.rotation, speed, { x: 0, y: 0, z: 0, ease: easing}, 0);\n// \n// }; \n// \n// function zoom(object) {\n// \n// \tconst pos = camera.position.clone();\n// \tobject.worldToLocal(camera.position);\n// \tobject.add(camera);\n// \n// \tconst speed = 1;\n// \ttimeline.clear();\n// \n// \ttimeline.to( camera.position, speed, {\n// \t\tx: pos.x,\n// \t\ty: pos.y,\n// \t\tz: getDistance(object),\n// \t\tease: easing\n// \t},0);\n// \n// };\n// \n// function mouseDown(e) {\n// \tconst x = ( e.touches ? e.touches[0].clientX : e.clientX );\n// \tconst y = ( e.touches ? e.touches[0].clientY : e.clientY );\n// \tconst mouse = {\n// \t\tx: ( x / window.innerWidth ) * 2 - 1,\n// \t\ty: - ( y / window.innerHeight ) * 2 + 1\n// \t};\n// \tconst vector = new THREE.Vector3( mouse.x, mouse.y ).unproject( camera );\n// \tconst raycaster = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize());\n// \tconst intersects = raycaster.intersectObject( scene, true );\n// \tif(intersects.length > 0 && intersects[0].object !== selected && intersects[0].object.name !== 'scene') {\n// \t\tselected = intersects[0].object;\n// \t\tconsole.log(selected);\n// \t\tzoom(selected);\n// \t} else {\n// \t\tselected = null;\n// \t\treset(); \n// \t}\n// }\n// \n// function onWindowResize() {\n// \tcamera.aspect = window.innerWidth / window.innerHeight;\n// \tcamera.updateProjectionMatrix();\n// \trenderer.setSize(window.innerWidth, window.innerHeight);\n// }\n// \n// function onDocumentMouseDown(event) {\n// \tevent.preventDefault();\n// \tisUserInteracting = true;\n// \tonPointerDownPointerX = event.clientX;\n// \tonPointerDownPointerY = event.clientY;\n// \tonPointerDownLon = lon;\n// \tonPointerDownLat = lat;\n// }\n// \n// function onDocumentMouseWheel( event ) {\n// \tconsole.log('event', camera.fov)\n// \n// \tcamera.fov += event.deltaY * 0.05;\n// \tcamera.updateProjectionMatrix();\n// \n// }\n// \n// function onDocumentMouseMove(event) {\n// \tif (isUserInteracting === true) {\n// \t\tlon = (onPointerDownPointerX - event.clientX) * 0.1 + onPointerDownLon;\n// \t}\n// }\n// \n// function onDocumentMouseUp(event) {\n// \tisUserInteracting = false;\n// }\n// \n// function onDocumentClick(event) {\n// \tcamera.fov = zoomed ? fovMin : fovMax\n// \t// i = zoomed ? -1 : 1\n// \tzoomed = !zoomed\n// \ttween\n// \t// .onUpdate(() => {\n// \t// \tcamera.fov = \n// \t// })\n// \t.start();\n// \n// \n// \t// int = setInterval(() => {\n// \t// \tval = val + 0.05*i;\n// \t// \tcamera.fov = val;\n// \t// \ti++;\n// \t// \tconsole.log(val);\n// \t// \tif(val > 85) {\n// \t// \t\tclearInterval(int)\n// \t// \t}\n// \t// },30);\n// }\n// \n// // var coords = { x: 0, y: 0 };\n// // var tween = new TWEEN.Tween({x: 75})\n// //     .to({x: 85}, 1000)\n// //     .onUpdate(function() {\n// //     \tcamera.fov = this.x\n// //     })\n// \n// function animate() {\n// \trequestAnimationFrame(animate);\n// \tupdate();\n// }\n// \n// function render() {\n// \trenderer.render(scene, camera);\n// }\n// \n// function update(time) {\n// \tlat = Math.max(-85, Math.min(85, lat));\n// \tphi = THREE.Math.degToRad(90 - lat);\n// \ttheta = THREE.Math.degToRad(lon);\n// \tcamera.target.x = 500 * Math.sin(phi) * Math.cos(theta);\n// \tcamera.target.y = 500 * Math.cos(phi);\n// \tcamera.target.z = 500 * Math.sin(phi) * Math.sin(theta);\n// \tcamera.lookAt(camera.target);\n// \t// TWEEN.update(time);\n// \t// camera.fov = camera.fov += 0.1 \n// \t// console.log(camera.fov)\n// \tcamera.updateProjectionMatrix();\n// \trender();\n// }\n// \n// function  orbit(origin, h, v, distance) {    \n// \torigin = origin || new THREE.Vector3();    \n// \tvar p = new THREE.Vector3();    \n// \tvar phi = v * Math.PI / 180;    \n// \tvar theta = h * Math.PI / 180;    \n// \tp.x = (distance * Math.sin(phi) * Math.cos(theta)) + origin.x;    \n// \tp.z = (distance * Math.sin(phi) * Math.sin(theta)) + origin.z;    \n// \tp.y = (distance * Math.cos(phi)) + origin.y;    \n// \treturn p;\n// }\n\n\n// Add Audio Loader\nlet audio = document.createElement('audio');\nlet source = document.createElement('source');\nsource.src = '/audio/AC-Trailer.mp3';\naudio.appendChild(source);\naudio.play();\n\nlet camera, container, color, controls, clock, delta, h, info, layer = false, logoGeo, logoMaterial, logoMesh, logoTexture, marker, mesh, materials = [], mousePos, parameters, particles, rainDensity = 20000, rainGeometry, renderer, raycaster, scene, size, smokeParticles = [], spotLight, spotLightHelper, sprite, stats; \n\nlet isUserInteracting = true,\nonMouseDownMouseX = 0, onMouseDownMouseY = 0,\nonMouseDownLon = 0,\nlat = 0, onMouseDownLat = 0,\nphi = 0, theta = 0;\n\ncontainer = document.getElementById( 'container' );\n// info = document.getElementById( 'info' );\n\ninit();\ninitRain();\nanimate();\n\n// let moveForward = false;\n// let moveBackward = false;\n// let moveLeft = false;\n// let moveRight = false;\n// let canJump = false;\n// let prevTime = performance.now();\n// let velocity = new THREE.Vector3();\n\n//************************************************************************//\n//                             Init Scene                                //\n//************************************************************************//\n\nfunction init() {\n\n\tcamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000 );\n\tcamera.target = new THREE.Vector3( 0, 0, 0 );\n\n\tscene = new THREE.Scene();\n\t// scene.fog = new THREE.FogExp2( 0x000000, 0.0008 );\n\t// scene.fog = new THREE.FogExp2(0x000000, 0.005);\n\tscene.fog = new THREE.Fog(0x000000, 0.0008);\n\t\n\n\tlet geometry = new THREE.SphereGeometry( 500, 60, 400 );\n\tgeometry.scale( - 1, 1, 1 );\n\n\tlet material = new THREE.MeshBasicMaterial( {\n\t\tmap: new THREE.TextureLoader().load( 'textures/AnimusPanorama.jpg' ),\n\t\tfog: true,\n\t});\n\t\n\t// let logoGeo = THREE.PlaneGeometry( 5, 20, 32 );\n\t// let logo = new THREE.MeshBasicMaterial({\n\t// \tmap: new THREE.TextureLoader().load( 'textures/assassins_creed_logo.jpg' ),\n\t// })\n\t\n\t// let logoMesh = new THREE.Mesh(logoGeo, logo);\n\t// scene.add(logoMesh)\n\t// \n\n\tmesh = new THREE.Mesh( geometry, material );\n\tscene.add( mesh );\n\t\n\t// let spotLight = new THREE.SpotLight(0xffffff, 40, 40);\n\t// camera.add(spotLight);\n\t// spotLight.position.set(0, 0,1);\n\t// spotLight.target = mesh;\n\t// add light\n\t// let light = new THREE.DirectionalLight(0xffffff, 1);\n\t// light.position.set(0,0,0);\n\t// scene.add(light);\n\t\n\t// let light = new THREE.SpotLight(0xffffff, 2.0, 1000);\n\t// light.target = mesh;\n\t// scene.add(light)\n\t// \n\t// let lightHelper = new THREE.SpotLightHelper(light);\n\t// scene.add(lightHelper)\n\t\n\t// spotLight = new THREE.SpotLight( 0xffffff, 2, 100 );\n\t// spotLight.position.set(0, 0, 0 );\n\t// spotLight.target = mesh\n\t// spotLight.position.set(20, 20, 20);\n\t// spotLight.castShadow = true;\n\t// spotLight.angle = Math.PI / 4;\n\t// spotLight.penumbra = 0.05;\n\t// spotLight.decay = 2;\n\t// spotLight.distance = 200;\n\t// spotLight.shadow.mapSize.width = 100;\n\t// spotLight.shadow.mapSize.height = 100;\n\t// spotLight.shadow.camera.near = 1;\n\t// spotLight.shadow.camera.far = 10;\n\t// spotLight.position.set(-20, 60, -10);\n    // spotLight.castShadow = true;\n\t// scene.add( spotLight );\n\t// camera.add(spotLight);\n\t// scene.add(camera)\n\n\t// spotLightHelper = new THREE.SpotLightHelper( spotLight );\n\t// scene.add( spotLightHelper );\n\t\t\n\t// marker = new THREE.Object3D();\n\t// marker.position.set(400, 300, 400);\n\t// marker.add(spotLight);\n\t// scene.add(marker);\n\t\n\tcontrols = new THREE.PointerLockControls( camera );\n\tscene.add( controls.getObject() );\n\t\n\tclock = new THREE.Clock();\n\t\n    \n\t// logoGeo = new THREE.PlaneGeometry(300,300);\n    // THREE.ImageUtils.crossOrigin = ''; //Need this to pull in crossdomain images from AWS\n    // logoTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/quickText.png');\n    // logoMaterial = new THREE.MeshLambertMaterial({color: 0x00ffff, opacity: 0.1, map: logoTexture, transparent: true, blending: THREE.AdditiveBlending})\n    // logoMesh = new THREE.Mesh(logoGeo, logoMaterial);\n    // logoMesh.position.z = 800;\n    // scene.add(logoMesh);\n\t\n\tlogoGeo = new THREE.PlaneGeometry(1024, 1024);\n    THREE.ImageUtils.crossOrigin = ''; //Need this to pull in crossdomain images from AWS\n    logoTexture = THREE.ImageUtils.loadTexture('/textures/AC-Logo.png');\n    logoMaterial = new THREE.MeshLambertMaterial({color: 0xffffff, opacity: 1.1, map: logoTexture})\n    logoMesh = new THREE.Mesh(logoGeo, logoMaterial);\n    scene.add(logoMesh);\n\t\n\t//Smoke Light\n    let light = new THREE.DirectionalLight(0xffffff, 1.5);\n    light.position.set(-1, 0, 1);\n    scene.add(light);\n  \n    let smokeTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/Smoke-Element.png');\n    let smokeMaterial = new THREE.MeshLambertMaterial({color: 0xffffff, map: smokeTexture, transparent: true});\n    let smokeGeo = new THREE.PlaneGeometry(500, 500);\n     \n    for (let p = 0; p < 150; p++) {\n        let particle = new THREE.Mesh(smokeGeo,smokeMaterial);\n        particle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n        particle.rotation.z = Math.random() * 360;\n        scene.add(particle);\n        smokeParticles.push(particle);\n    }\t\n\t\n\t// let onKeyDown = function ( event ) {\n\t// \tswitch ( event.keyCode ) {\n\t// \t\t\n\t// \t\tcase 38: // up\n\t// \t\tcase 87: // w\n\t// \t\tmoveForward = true;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 37: // left\n\t// \t\tcase 65: // a\n\t// \t\t// lon = event.clientX\n\t// \t\tmoveLeft = true; \n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 40: // down\n\t// \t\tcase 83: // s\n\t// \t\tmoveBackward = true;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 39: // right\n\t// \t\tcase 68: // d\n\t// \t\t// lon = event.clientX\n\t// \t\tmoveRight = true;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 32: // space\n\t// \t\tif ( canJump === true ) velocity.y += 350;\n\t// \t\tcanJump = false;\n\t// \t\tbreak;\n\t// \t}\n\t// };\n\t// \n\t// let onKeyUp = function ( event ) {\n\t// \tswitch( event.keyCode ) {\n\t// \t\t\n\t// \t\tcase 38: // up\n\t// \t\tcase 87: // w\n\t// \t\tmoveForward = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 37: // left\n\t// \t\tcase 65: // a\n\t// \t\tmoveLeft = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 40: // down\n\t// \t\tcase 83: // s\n\t// \t\tmoveBackward = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 39: // right\n\t// \t\tcase 68: // d\n\t// \t\tmoveRight = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t}\n\t// };\n\n\trenderer = new THREE.WebGLRenderer({\n\t\tantialias: true,\n\t\talpha: true,\n\t});\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\tcontainer.appendChild( renderer.domElement );\n\tcontainer.addEventListener(\"mousedown\", getPosition, false);\n\n\t// document.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\tdocument.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\tdocument.addEventListener( 'mouseup', onDocumentMouseUp, false );\n\tdocument.addEventListener( 'wheel', onDocumentMouseWheel, false );\n\t// document.addEventListener( 'keydown', onKeyDown, false );\n\t// document.addEventListener( 'keyup', onKeyUp, false );\n\t// document.addEventListener(\"DOMContentLoaded\", init, false);\n\n\tdocument.addEventListener( 'dragover', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.dataTransfer.dropEffect = 'copy';\n\n\t}, false );\n\n\tdocument.addEventListener( 'dragenter', function ( event ) {\n\n\t\tdocument.body.style.opacity = 0.5;\n\n\t}, false );\n\n\tdocument.addEventListener( 'dragleave', function ( event ) {\n\n\t\tdocument.body.style.opacity = 1;\n\n\t}, false );\n\n\tdocument.addEventListener( 'drop', function ( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tlet reader = new FileReader();\n\t\treader.addEventListener( 'load', function ( event ) {\n\n\t\t\tmaterial.map.image.src = event.target.result;\n\t\t\tmaterial.map.needsUpdate = true;\n\n\t\t}, false );\n\t\treader.readAsDataURL( event.dataTransfer.files[ 0 ] );\n\n\t\tdocument.body.style.opacity = 1;\n\n\t}, false );\n\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\t\n\tstats = new Stats();\n\tstats.domElement.style.position = 'absolute';\n\tstats.domElement.style.bottom = '0px';\n\tstats.domElement.style.zIndex = 100;\n\tcontainer.appendChild( stats.domElement );\n\t\n\tdocument.body.appendChild( renderer.domElement );\n}\n\nfunction initRain() {\n\trainGeometry = new THREE.Geometry();\n\n\tlet sprite1 = THREE.ImageUtils.loadTexture( \"textures/rain1.png\" ),\n\tsprite2 = THREE.ImageUtils.loadTexture( \"textures/rain2.png\" ),\n\tsprite3 = THREE.ImageUtils.loadTexture( \"textures/rain3.png\" ),\n\tsprite4 = THREE.ImageUtils.loadTexture( \"textures/rain4.png\" ),\n\tsprite5 = THREE.ImageUtils.loadTexture( \"textures/rain5.png\" );\n\n\tfor (let i = 0; i < rainDensity; i++ ) {\n\t\tlet vertex = new THREE.Vector3();\n\t\tvertex.x = Math.random() * 2000 - 1000;\n\t\tvertex.y = Math.random() * 4000 + 500;\n\t\tvertex.z = Math.random() * 2000 - 1000;\n\n\t\trainGeometry.vertices.push( vertex );\n\t}\n\n\tparameters = [ [ [1.0, 0.2, 0.5], \tsprite2, 20 ],\n\t\t\t\t   [ [0.95, 0.1, 0.5], \tsprite3, 15 ],\n\t\t\t\t   [ [0.90, 0.05, 0.5], sprite1, 10 ],\n\t\t\t\t   [ [0.85, 0, 0.5], \tsprite5, 8 ],\n\t\t\t\t   [ [0.80, 0, 0.5], \tsprite4, 5 ],\n\t\t\t\t   ];\n\n\tfor (let i = 0; i < parameters.length; i++ ) {\n\n\t\tcolor  = parameters[i][0];\n\t\tsprite = parameters[i][1];\n\t\tsize   = parameters[i][2];\n\n\t\tmaterials[i] = new THREE.PointCloudMaterial({ \n\t\t\tsize: size, \n\t\t\tmap: sprite, \n\t\t\tblending: THREE.AdditiveBlending, \n\t\t\tdepthTest: false, \n\t\t\ttransparent : true \n\t\t});\n\t\tmaterials[i].color.setHSL( color[0], color[1], color[2] );\n\n\t\tparticles = new THREE.PointCloud( rainGeometry, materials[i] );\n\n\t\tparticles.rotation.z =  Math.random() * 0.20 + 0.10;\n\n\t\tscene.add( particles );\n\n\t}\n}\n\nfunction animateRain() {\n\t// console.log(\"I'M ANIMATING THINGS\");\n\tlet time = Date.now() * 0.00005;\n\n\tfor (let i = 0; i < scene.children.length; i++ ) {\n\n\t\tlet object = scene.children[i];\n\t\t\n\t\t// Not getting into the log here\n\t\tif ( object instanceof THREE.PointCloud ) {\n\t\t\tconsole.log(\"I'M ANIMATING THINGS\");\n\t\t\tif (i == 0) {\n\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif (i > 0) {\n\t\t\t\tif (layer)\n\t\t\t\t\tobject.translateY(-10);\n\t\t\t\telse\n\t\t\t\t\tif(scene.children[i-1].position.y < ((window.innerHeight * -1) / 2 - 1000))\n\t\t\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\n\t\t\tif ((object.position.y < window.innerHeight * -1 * 5)) {\n\t\t\t\t\tobject.position.y = 500;\n\t\t\t\t\tobject.position.x = 0;\n\t\t\t\t\tif (i == 0) layer = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = 0; i < materials.length; i++ ) {\n\n\t\tcolor = parameters[i][0];\n\n\t\th = ( 360 * ( color[0] + time ) % 360 ) / 360;\n\t\tmaterials[i].color.setHSL( h, color[1], color[2] );\n\n\t}\n}\n\n\nfunction onWindowResize() {\n\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n}\n\n// function onDocumentMouseDown( event ) {\n// \n// \t// event.preventDefault();\n// \n// \tisUserInteracting = true;\n// \n// \tonPointerDownPointerX = event.clientX;\n// \t// onPointerDownPointerY = event.clientY;\n// \n// \tonPointerDownLon = lon;\n// \t// onPointerDownLat = lat;\n// \n// }\n\nfunction onDocumentMouseMove( event ) {\n\t\n\tisUserInteracting = true;\n\tlon = event.clientX \n\t// event.clientY = 0\n\t// lon = ( onPointerDownPointerX - event.clientX ) * -0.5 + onPointerDownLon;\n\t\n\t// if ( isUserInteracting === true ) {\n\t// \t// onPointerDownLon = lon;\n\t// \tlon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;\n\t// \t// lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;\n\t// }\n}\n\nfunction onDocumentMouseUp( event ) {\n\n\tisUserInteracting = false;\n\n}\n\n// Zoom in & out | Need to limit this to the starting point and a endind point\nfunction onDocumentMouseWheel( event ) {\n\t\n\tcamera.fov += event.deltaY * 0.01;\n\tcamera.updateProjectionMatrix();\n\n}\n\nfunction animate() {\n\t\n\trequestAnimationFrame( animate );\n\tupdate();\n\n}\n\nfunction update() {\n\t\t\n\tif ( isUserInteracting === false ) {\n\t\t// lon += 0.1;\n\t}\n\n\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\tphi = THREE.Math.degToRad( 90 - lat );\n\ttheta = THREE.Math.degToRad( lon );\n\n\tcamera.target.x = 500 * Math.sin( phi ) * Math.cos( theta );\n\t// camera.target.y = 500 * Math.cos( phi );\n\tcamera.target.z = 500 * Math.sin( phi ) * Math.sin( theta );\n\n\tcamera.lookAt( camera.target );\n\n\t/*\n\t// distortion\n\tcamera.position.copy( camera.target ).negate();\n\t*/\n\t// let delta = clock.getDelta(), speed = delta * CAMERAMOVESPEED;\n\t// controls.update(delta);\n\t// spotLight.target = marker;\n\t// controls.update()\n\t\n\t// spotLightHelper.update()\n\tstats.update()\n\tdelta = clock.getDelta();\n\tevolveSmoke();\n\tanimateRain();\n\t// rainEngine.update(0.01 * 0.5)\n\trenderer.render( scene, camera );\n}\n\nfunction evolveSmoke() {\n    let sp = smokeParticles.length;\n    while(sp--) {\n        smokeParticles[sp].rotation.z += (delta * 0.2);\n    }\n}\n\nfunction getPosition(event) {\n\tlet x = new Number();\n\tlet y = new Number();\n\t\n\tif (event.x != undefined && event.y != undefined) {\n\t\tx = event.x;\n\t\ty = event.y;\n\t} else { // Firefox method to get the position\n\t\tx = event.clientX + document.body.scrollLeft +\n\t\tdocument.documentElement.scrollLeft;\n\t\ty = event.clientY + document.body.scrollTop +\n\t\tdocument.documentElement.scrollTop;\n\t}\n\tx -= container.offsetLeft;\n\ty -= container.offsetTop;\t\n\t// alert(\"x: \" + x + \"  y: \" + y);\n\tconsole.log(\"x: \" + x + \"  y: \" + y);\n}\n\n\n\n"]}