{"version":3,"sources":["index.js"],"names":["lon","fovMin","fovMax","zoomed","onPointerDownPointerX","onPointerDownLon","manager","THREE","LoadingManager","onProgress","item","loaded","total","console","log","onLoad","onError","audio","document","createElement","source","src","appendChild","play","camera","container","color","controls","clock","delta","h","info","layer","logoGeo","logoMaterial","logoMesh","logoTexture","marker","mesh","materials","mousePos","parameters","particles","rainDensity","rainGeometry","renderer","raycaster","scene","size","smokeParticles","spotLight","spotLightHelper","sprite","stats","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLon","lat","onMouseDownLat","phi","theta","getElementById","init","animate","PerspectiveCamera","window","innerWidth","innerHeight","target","Vector3","Scene","fog","Fog","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","Mesh","add","initStats","PointerLockControls","getObject","Clock","PlaneGeometry","ImageUtils","crossOrigin","loadTexture","MeshLambertMaterial","opacity","WebGLRenderer","antialias","alpha","setPixelRatio","devicePixelRatio","setSize","domElement","addEventListener","getPosition","onDocumentMouseMove","onDocumentMouseUp","onDocumentMouseWheel","event","preventDefault","dataTransfer","dropEffect","body","style","reader","FileReader","image","result","needsUpdate","readAsDataURL","files","onWindowResize","initRain","buildSmoke","light","DirectionalLight","position","set","directionalLight","normalize","smokeTexture","smokeMaterial","transparent","smokeGeo","p","particle","Math","random","rotation","z","push","evolveSmoke","sp","length","Geometry","sprite1","sprite2","sprite3","sprite4","sprite5","i","vertex","x","y","vertices","PointCloudMaterial","blending","AdditiveBlending","depthTest","setHSL","PointCloud","animateRain","time","Date","now","children","object","translateY","aspect","updateProjectionMatrix","clientX","fov","deltaY","requestAnimationFrame","update","max","min","degToRad","sin","cos","lookAt","getDelta","render","Number","undefined","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","Stats","left","top","zIndex"],"mappings":"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","file":"app.js","sourcesContent":["let lon = 30;\n// let lat = 0;\n// let phi = 0;\n// let theta = 0;\nlet fovMin = 75;\nlet fovMax = 55;\nlet zoomed;\n\nlet onPointerDownPointerX;\nlet onPointerDownLon;\n// let onPointerDownLat;\n\n\n//************************************************************************//\n//                             Init Loader                                //\n//************************************************************************//\n\n\nlet manager = new THREE.LoadingManager();\n\nmanager.onProgress = function (item, loaded, total) {\n\titem = 'textures/AC-Logo.png'\n    console.log(item, loaded, total);\n};\nmanager.onLoad = function () {\n    console.log('all items loaded');\n\treturn item\n};\nmanager.onError = function () {\n    console.log('there has been an error');\n};\n\n\n//************************************************************************//\n//                             Init Audio                                 //\n//************************************************************************//\n\nlet audio = document.createElement('audio');\nlet source = document.createElement('source');\nsource.src = '/audio/AC-Trailer.mp3';\naudio.appendChild(source);\naudio.play();\n\n//************************************************************************//\n//                              Variables                           \t  //\n//************************************************************************//\n\nlet camera, container, color, controls, clock, delta, h, info, layer = false, logoGeo, logoMaterial, logoMesh, logoTexture, marker, mesh, materials = [], mousePos, parameters, particles, rainDensity = 20000, rainGeometry, renderer, raycaster, scene, size, smokeParticles = [], spotLight, spotLightHelper, sprite, stats; \n\nlet isUserInteracting = true,\nonMouseDownMouseX = 0, onMouseDownMouseY = 0,\nonMouseDownLon = 0,\nlat = 0, onMouseDownLat = 0,\nphi = 0, theta = 0;\n\ncontainer = document.getElementById( 'container' );\n\ninit();\nanimate();\n\n\n//************************************************************************//\n//                             Init Scene                                 //\n//************************************************************************//\n\nfunction init() {\n\n\tcamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000 );\n\tcamera.target = new THREE.Vector3( 0, 0, 0 );\n\n\tscene = new THREE.Scene();\n\t// scene.fog = new THREE.FogExp2( 0x000000, 0.0008 );\n\t// scene.fog = new THREE.FogExp2(0x000000, 0.005);\n\tscene.fog = new THREE.Fog(0x000000, 0.0008);\n\t\n\n\tlet geometry = new THREE.SphereGeometry( 500, 60, 400 );\n\tgeometry.scale( - 1, 1, 1 );\n\n\tlet material = new THREE.MeshBasicMaterial( {\n\t\tmap: new THREE.TextureLoader().load( 'textures/AnimusPanorama.jpg' ),\n\t\tfog: true,\n\t});\n\t\n\tmesh = new THREE.Mesh( geometry, material );\n\tscene.add( mesh );\n\t\n\tstats = initStats()\n\t// let logoGeo = THREE.PlaneGeometry( 5, 20, 32 );\n\t// let logo = new THREE.MeshBasicMaterial({\n\t// \tmap: new THREE.TextureLoader().load( 'textures/assassins_creed_logo.jpg' ),\n\t// })\n\t\n\t// let logoMesh = new THREE.Mesh(logoGeo, logo);\n\t// scene.add(logoMesh)\n\t// \n\n\t\n\t// let spotLight = new THREE.SpotLight(0xffffff, 40, 40);\n\t// camera.add(spotLight);\n\t// spotLight.position.set(0, 0,1);\n\t// spotLight.target = mesh;\n\t// add light\n\t// let light = new THREE.DirectionalLight(0xffffff, 1);\n\t// light.position.set(0,0,0);\n\t// scene.add(light);\n\t\n\t// let light = new THREE.SpotLight(0xffffff, 2.0, 1000);\n\t// light.target = mesh;\n\t// scene.add(light)\n\t// \n\t// let lightHelper = new THREE.SpotLightHelper(light);\n\t// scene.add(lightHelper)\n\t\n\t// spotLight = new THREE.SpotLight( 0xffffff, 2, 100 );\n\t// spotLight.position.set(0, 0, 0 );\n\t// spotLight.target = mesh\n\t// spotLight.position.set(20, 20, 20);\n\t// spotLight.castShadow = true;\n\t// spotLight.angle = Math.PI / 4;\n\t// spotLight.penumbra = 0.05;\n\t// spotLight.decay = 2;\n\t// spotLight.distance = 200;\n\t// spotLight.shadow.mapSize.width = 100;\n\t// spotLight.shadow.mapSize.height = 100;\n\t// spotLight.shadow.camera.near = 1;\n\t// spotLight.shadow.camera.far = 10;\n\t// spotLight.position.set(-20, 60, -10);\n    // spotLight.castShadow = true;\n\t// scene.add( spotLight );\n\t// camera.add(spotLight);\n\t// scene.add(camera)\n\n\t// spotLightHelper = new THREE.SpotLightHelper( spotLight );\n\t// scene.add( spotLightHelper );\n\t\t\n\t// marker = new THREE.Object3D();\n\t// marker.position.set(400, 300, 400);\n\t// marker.add(spotLight);\n\t// scene.add(marker);\n\t\n\tcontrols = new THREE.PointerLockControls( camera );\n\tscene.add( controls.getObject() );\n\t\n\tclock = new THREE.Clock();\n    \n\t// logoGeo = new THREE.PlaneGeometry(300,300);\n    // THREE.ImageUtils.crossOrigin = ''; //Need this to pull in crossdomain images from AWS\n    // logoTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/quickText.png');\n    // logoMaterial = new THREE.MeshLambertMaterial({color: 0x00ffff, opacity: 0.1, map: logoTexture, transparent: true, blending: THREE.AdditiveBlending})\n    // logoMesh = new THREE.Mesh(logoGeo, logoMaterial);\n    // logoMesh.position.z = 800;\n    // scene.add(logoMesh);\n\t\n\tlogoGeo = new THREE.PlaneGeometry(1024, 1024);\n    THREE.ImageUtils.crossOrigin = ''; \n    logoTexture = THREE.ImageUtils.loadTexture('/textures/AC-Logo.png');\n    logoMaterial = new THREE.MeshLambertMaterial({\n\t\t// color: 0xffffff, \n\t\topacity: 2.1, \n\t\tmap: logoTexture\n\t})\n    logoMesh = new THREE.Mesh(logoGeo, logoMaterial);\n    scene.add(logoMesh);\n\t\n\t// let onKeyDown = function ( event ) {\n\t// \tswitch ( event.keyCode ) {\n\t// \t\t\n\t// \t\tcase 38: // up\n\t// \t\tcase 87: // w\n\t// \t\tmoveForward = true;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 37: // left\n\t// \t\tcase 65: // a\n\t// \t\t// lon = event.clientX\n\t// \t\tmoveLeft = true; \n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 40: // down\n\t// \t\tcase 83: // s\n\t// \t\tmoveBackward = true;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 39: // right\n\t// \t\tcase 68: // d\n\t// \t\t// lon = event.clientX\n\t// \t\tmoveRight = true;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 32: // space\n\t// \t\tif ( canJump === true ) velocity.y += 350;\n\t// \t\tcanJump = false;\n\t// \t\tbreak;\n\t// \t}\n\t// };\n\t// \n\t// let onKeyUp = function ( event ) {\n\t// \tswitch( event.keyCode ) {\n\t// \t\t\n\t// \t\tcase 38: // up\n\t// \t\tcase 87: // w\n\t// \t\tmoveForward = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 37: // left\n\t// \t\tcase 65: // a\n\t// \t\tmoveLeft = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 40: // down\n\t// \t\tcase 83: // s\n\t// \t\tmoveBackward = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t\tcase 39: // right\n\t// \t\tcase 68: // d\n\t// \t\tmoveRight = false;\n\t// \t\tbreak;\n\t// \t\t\n\t// \t}\n\t// };\n\n\trenderer = new THREE.WebGLRenderer({\n\t\tantialias: true,\n\t\talpha: true,\n\t});\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\tcontainer.appendChild( renderer.domElement );\n\tcontainer.addEventListener(\"mousedown\", getPosition, false);\n\n\tdocument.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\tdocument.addEventListener( 'mouseup', onDocumentMouseUp, false );\n\tdocument.addEventListener( 'wheel', onDocumentMouseWheel, false );\n\t// document.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\t// document.addEventListener( 'keydown', onKeyDown, false );\n\t// document.addEventListener( 'keyup', onKeyUp, false );\n\t// document.addEventListener(\"DOMContentLoaded\", init, false);\n\n\tdocument.addEventListener( 'dragover', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.dataTransfer.dropEffect = 'copy';\n\n\t}, false );\n\n\tdocument.addEventListener( 'dragenter', function ( event ) {\n\n\t\tdocument.body.style.opacity = 0.5;\n\n\t}, false );\n\n\tdocument.addEventListener( 'dragleave', function ( event ) {\n\n\t\tdocument.body.style.opacity = 1;\n\n\t}, false );\n\n\tdocument.addEventListener( 'drop', function ( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tlet reader = new FileReader();\n\t\treader.addEventListener( 'load', function ( event ) {\n\n\t\t\tmaterial.map.image.src = event.target.result;\n\t\t\tmaterial.map.needsUpdate = true;\n\n\t\t}, false );\n\t\treader.readAsDataURL( event.dataTransfer.files[ 0 ] );\n\n\t\tdocument.body.style.opacity = 1;\n\n\t}, false );\n\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\t\n\tinitRain();\n\t\n\tdocument.body.appendChild( renderer.domElement );\n}\n\nfunction buildSmoke() {\n\t//Smoke Light\n    let light = new THREE.DirectionalLight(0xffffff, 1.5);\n    light.position.set(-1, 0, 1);\n    scene.add(light);\n\t\n\tlet directionalLight = new THREE.DirectionalLight(0xffffff);\n    directionalLight.position.set(1, 1, 1).normalize();\n    scene.add(directionalLight);\n  \n    let smokeTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/Smoke-Element.png');\n    let smokeMaterial = new THREE.MeshLambertMaterial({\n\t\tcolor: 0xffffff, \n\t\tmap: smokeTexture, \n\t\ttransparent: true\n\t});\n    let smokeGeo = new THREE.PlaneGeometry(500, 500);\n     \n    for (let p = 0; p < 150; p++) {\n        let particle = new THREE.Mesh(smokeGeo,smokeMaterial);\n        particle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n        particle.rotation.z = Math.random() * 360;\n        scene.add(particle);\n        smokeParticles.push(particle);\n    }\t\n}\n\n\nfunction evolveSmoke() {\n    let sp = smokeParticles.length;\n    while(sp--) {\n        smokeParticles[sp].rotation.z += (delta * 0.2);\n    }\n}\n\nfunction initRain() {\n\trainGeometry = new THREE.Geometry();\n\n\tlet sprite1 = THREE.ImageUtils.loadTexture( \"textures/rain1.png\" ),\n\tsprite2 = THREE.ImageUtils.loadTexture( \"textures/rain2.png\" ),\n\tsprite3 = THREE.ImageUtils.loadTexture( \"textures/rain3.png\" ),\n\tsprite4 = THREE.ImageUtils.loadTexture( \"textures/rain4.png\" ),\n\tsprite5 = THREE.ImageUtils.loadTexture( \"textures/rain5.png\" );\n\n\tfor (let i = 0; i < rainDensity; i++ ) {\n\t\tlet vertex = new THREE.Vector3();\n\t\tvertex.x = Math.random() * 2000 - 1000;\n\t\tvertex.y = Math.random() * 4000 + 500;\n\t\tvertex.z = Math.random() * 2000 - 1000;\n\n\t\trainGeometry.vertices.push( vertex );\n\t}\n\n\tparameters = [ [ [1.0, 0.2, 0.5], \tsprite2, 20 ],\n\t\t\t\t   [ [0.95, 0.1, 0.5], \tsprite3, 15 ],\n\t\t\t\t   [ [0.90, 0.05, 0.5], sprite1, 10 ],\n\t\t\t\t   [ [0.85, 0, 0.5], \tsprite5, 8 ],\n\t\t\t\t   [ [0.80, 0, 0.5], \tsprite4, 5 ],\n\t\t\t\t   ];\n\n\tfor (let i = 0; i < parameters.length; i++ ) {\n\n\t\tcolor  = parameters[i][0];\n\t\tsprite = parameters[i][1];\n\t\tsize   = parameters[i][2];\n\n\t\tmaterials[i] = new THREE.PointCloudMaterial({ \n\t\t\tsize: size, \n\t\t\tmap: sprite, \n\t\t\tblending: THREE.AdditiveBlending, \n\t\t\tdepthTest: false, \n\t\t\ttransparent : true \n\t\t});\n\t\tmaterials[i].color.setHSL( color[0], color[1], color[2] );\n\n\t\tparticles = new THREE.PointCloud( rainGeometry, materials[i] );\n\n\t\tparticles.rotation.z = Math.random() * 0.20 + 0.10;\n\n\t\tscene.add( particles );\n\n\t}\n}\n\nfunction animateRain() {\n\t// console.log(\"I'M ANIMATING THINGS\");\n\tlet time = Date.now() * 0.00005;\n\n\tfor (let i = 0; i < scene.children.length; i++ ) {\n\n\t\tlet object = scene.children[i];\n\t\t\n\t\t// Not getting into the log here\n\t\tif ( object instanceof THREE.PointCloud ) {\n\t\t\tconsole.log(\"I'M ANIMATING THINGS\");\n\t\t\tif (i == 0) {\n\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif (i > 0) {\n\t\t\t\tif (layer)\n\t\t\t\t\tobject.translateY(-10);\n\t\t\t\telse\n\t\t\t\t\tif(scene.children[i-1].position.y < ((window.innerHeight * -1) / 2 - 1000))\n\t\t\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\n\t\t\tif ((object.position.y < window.innerHeight * -1 * 5)) {\n\t\t\t\t\tobject.position.y = 500;\n\t\t\t\t\tobject.position.x = 0;\n\t\t\t\t\tif (i == 0) layer = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = 0; i < materials.length; i++ ) {\n\n\t\tcolor = parameters[i][0];\n\n\t\th = ( 360 * ( color[0] + time ) % 360 ) / 360;\n\t\tmaterials[i].color.setHSL( h, color[1], color[2] );\n\n\t}\n}\n\n\nfunction onWindowResize() {\n\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n}\n\nfunction onDocumentMouseMove( event ) {\n\t\n\tisUserInteracting = true;\n\tlon = event.clientX \n\t\n\t// if ( isUserInteracting === true ) {\n\t// \tlon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;\n\t// \t// lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;\n\t// }\n}\n\nfunction onDocumentMouseUp( event ) {\n\n\tisUserInteracting = false;\n\n}\n\n// Zoom in & out | Need to limit this to the starting point and a endind point\nfunction onDocumentMouseWheel( event ) {\n\t\n\tcamera.fov += event.deltaY * 0.01;\n\tcamera.updateProjectionMatrix();\n\n}\n\nfunction animate() {\n\t\n\trequestAnimationFrame( animate );\n\tupdate();\n\n}\n\nfunction update() {\n\t\t\n\tif ( isUserInteracting === false ) {\n\t\t// lon += 0.1;\n\t}\n\n\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\tphi = THREE.Math.degToRad( 90 - lat );\n\ttheta = THREE.Math.degToRad( lon );\n\n\tcamera.target.x = 500 * Math.sin( phi ) * Math.cos( theta );\n\t// camera.target.y = 500 * Math.cos( phi );\n\tcamera.target.z = 500 * Math.sin( phi ) * Math.sin( theta );\n\n\tcamera.lookAt( camera.target );\n\n\t/*\n\t// distortion\n\tcamera.position.copy( camera.target ).negate();\n\t*/\n\t// let delta = clock.getDelta(), speed = delta * CAMERAMOVESPEED;\n\t// controls.update(delta);\n\t// spotLight.target = marker;\n\t// controls.update()\n\t\n\t// spotLightHelper.update()\n\tstats.update()\n\tdelta = clock.getDelta();\n\tevolveSmoke();\n\tanimateRain();\n\t// rainEngine.update(0.01 * 0.5)\n\trenderer.render( scene, camera );\n}\n\nfunction getPosition(event) {\n\tlet x = new Number();\n\tlet y = new Number();\n\t\n\tif (event.x != undefined && event.y != undefined) {\n\t\tx = event.x;\n\t\ty = event.y;\n\t} else { // Firefox method to get the position\n\t\tx = event.clientX + document.body.scrollLeft +\n\t\tdocument.documentElement.scrollLeft;\n\t\ty = event.clientY + document.body.scrollTop +\n\t\tdocument.documentElement.scrollTop;\n\t}\n\tx -= container.offsetLeft;\n\ty -= container.offsetTop;\t\n\t// alert(\"x: \" + x + \"  y: \" + y);\n\tconsole.log(\"x: \" + x + \"  y: \" + y);\n}\n\nfunction initStats() {\n\t// stats.setMode(0); // 0: fps, 1: ms\n\t// Align top-left\n\tstats = new Stats();\n\tstats.domElement.style.position = 'absolute';\n\t// stats.domElement.style.bottom = '0px';\n\tstats.domElement.style.left = '0px';\n\tstats.domElement.style.top = '0px';\n\tstats.domElement.style.zIndex = 100;\n\tcontainer.appendChild(stats.domElement);\n\treturn stats;\n}\n\n\n\n\n"]}