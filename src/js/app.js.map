{"version":3,"sources":["index.js"],"names":["camera","scene","renderer","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLat","onMouseDownLon","lon","lat","phi","theta","fovMin","fovMax","zoomed","onPointerDownPointerX","onPointerDownPointerY","onPointerDownLon","onPointerDownLat","selected","controls","timeline","init","animate","container","mesh","document","getElementById","THREE","PerspectiveCamera","window","innerWidth","innerHeight","target","Vector3","Math","max","min","degToRad","x","sin","cos","lookAt","Scene","add","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","Mesh","light","DirectionalLight","position","set","name","mat2","MeshLambertMaterial","side","DoubleSide","color","object","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","TrackballControls","rotateSpeed","zoomSpeed","panSpeed","noZoom","noPan","staticMoving","dynamicDampingFactor","enabled","TweenLite","ticker","addEventListener","render","TimelineLite","onStart","removeEventListener","update","onComplete","position0","copy","reset","onDocumentMouseUp","onWindowResize","mouseDown","startX","startY","easing","getDistance","helper","BoundingBoxHelper","width","height","y","vFOV","fov","PI","ratio","tan","screen","aspect","size","distance","box","z","pos","speed","parent","clone","localToWorld","clear","to","ease","rotation","zoom","worldToLocal","e","touches","clientX","clientY","mouse","vector","unproject","raycaster","Raycaster","sub","normalize","intersects","intersectObject","length","console","log","updateProjectionMatrix","onDocumentMouseDown","event","preventDefault","onDocumentMouseWheel","deltaY","onDocumentMouseMove","onDocumentClick","tween","start","requestAnimationFrame","time"],"mappings":"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","file":"app.js","sourcesContent":["let camera;\nlet scene;\nlet renderer;\nlet isUserInteracting = false;\nconst onMouseDownMouseX = 0;\nconst onMouseDownMouseY = 0;\nconst onMouseDownLat = 0;\nconst onMouseDownLon = 0;\nlet lon = 30;\nlet lat = 0;\nlet phi = 0;\nlet theta = 0;\nlet fovMin = 75;\nlet fovMax = 55;\nlet zoomed;\n\nlet onPointerDownPointerX;\nlet onPointerDownPointerY;\nlet onPointerDownLon;\nlet onPointerDownLat;\n\nlet selected;\nlet controls;\nlet timeline;\n\ninit();\nanimate();\n\nfunction init() {\n\tlet container;\n\tlet mesh;\n\tcontainer = document.getElementById('container');\n\tcamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100);\n\tcamera.target = new THREE.Vector3(0, 0, 0);\n\n\tlat = Math.max(-85, Math.min(85,lat));\n\tphi = THREE.Math.degToRad(90-lat);\n\ttheta = THREE.Math.degToRad(lon);\n\tcamera.target.x = 500 * Math.sin(phi) * Math.cos(theta);\n\tcamera.lookAt(camera.target);\n\n\tscene = new THREE.Scene();\n\tscene.add(camera)\n\tconst geometry = new THREE.SphereGeometry(500, 60, 40);\n\tgeometry.scale(-1, 1, 1);\n\tconst material = new THREE.MeshBasicMaterial({\n\t\tmap: new THREE.TextureLoader().load('textures/AnimusPanorama.jpg')\n\t});\n\tmesh = new THREE.Mesh(geometry, material);\n\tscene.add(mesh);\n\n\t// add light\n\tlet light = new THREE.DirectionalLight('white', 1);\n\tlight.position.set(-4,4,4);\n\tlight.name = 'Back light';\n\tscene.add(light);\n\n\t// add a sphere to click\n\tlet mat2 = new THREE.MeshLambertMaterial({side: THREE.DoubleSide, color: '#f4d742'});\n\tlet object = new THREE.Mesh(new THREE.SphereGeometry(4,20,20),mat2);\n\tobject.position.set( 40, 0, 0 );\n\tobject.name = 'Object 1';\n\tscene.add(object);\n\n\trenderer = new THREE.WebGLRenderer();\n\trenderer.setPixelRatio(window.devicePixelRatio);\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\tcontainer.appendChild(renderer.domElement);\n\n\t// set up controls\n\tcontrols = new THREE.TrackballControls(camera);\n\tcontrols.rotateSpeed = 3.6;\n\tcontrols.zoomSpeed = 0.8;\n\tcontrols.panSpeed = 1;\n\tcontrols.noZoom = false;\n\tcontrols.noPan = false;\n\tcontrols.staticMoving = false;\n\tcontrols.dynamicDampingFactor = 0.12;\n\tcontrols.enabled = true;\n\t\n\tTweenLite.ticker.addEventListener('tick', render );\n\n\ttimeline = new TimelineLite({\n\t\tonStart: function(){\n\t\t\tTweenLite.ticker.removeEventListener(\"tick\", controls.update );\n\t\t\tcontrols.enabled = false;\n\t\t},\n\t\tonComplete: function(){\n\t\t\tTweenLite.ticker.addEventListener(\"tick\", controls.update );\n\t\t\tcontrols.position0.copy(camera.position);\n\t\t\tcontrols.reset();\n\t\t\tcontrols.enabled = true;\n\t\t}\n\t});\n\n\t// set up click handlers\n\t// document.addEventListener('mousedown', onDocumentMouseDown, false);\n\t// document.addEventListener('mousemove', onDocumentMouseMove, false);\n\tdocument.addEventListener('mouseup', onDocumentMouseUp, false);\n\twindow.addEventListener('resize', onWindowResize, false);\n\tdocument.addEventListener('mousedown', mouseDown, false);\n\tTweenLite.ticker.addEventListener(\"tick\", controls.update);\n}\n\nlet startX\nlet startY\nlet easing = 'Expo.easeInOut';\n\nfunction getDistance(object) {\n\tconst helper = new THREE.BoundingBoxHelper(object, 0xff0000);\n\thelper.update();\n\n\tlet width = helper.scale.x;\n\tlet height = helper.scale.y;\n\n\t// Set camera distance\n\tconst vFOV = camera.fov * Math.PI / 180;\n\n\tconst ratio = 2 * Math.tan( vFOV / 2 );\n\tconst screen = ratio * camera.aspect;\n\tconst size = Math.max(height,width);\n\tconst distance = (size / screen) + (helper.box.max.z / screen);\n\n\treturn distance;\n};\n\nfunction reset() {\n\n\tvar pos = { x: 0, y: 0 };\n\tconst distance = 60;\n\tconst speed = 1;\n \n\tif ( camera.parent !== scene ) {\n\t\tvar pos = camera.position.clone();\n\t\tcamera.parent.localToWorld(camera.position);\n\t\tscene.add(camera);\n\t}\n \n\ttimeline.clear();\n\ttimeline.to( camera.position, speed, { \n\tx: pos.x, \n\ty: pos.y, \n\tz: distance, \n\tease: easing \n\t}, 0);\n \ttimeline.to( camera.rotation, speed, { x: 0, y: 0, z: 0, ease: easing}, 0);\n\n}; \n\nfunction zoom(object) {\n\n\tconst pos = camera.position.clone();\n\tobject.worldToLocal(camera.position);\n\tobject.add(camera);\n\n\tconst speed = 1;\n\ttimeline.clear();\n\n\ttimeline.to( camera.position, speed, {\n\t\tx: pos.x,\n\t\ty: pos.y,\n\t\tz: getDistance(object),\n\t\tease: easing\n\t},0);\n\n};\n\nfunction mouseDown(e) {\n\tconst x = ( e.touches ? e.touches[0].clientX : e.clientX );\n\tconst y = ( e.touches ? e.touches[0].clientY : e.clientY );\n\tconst mouse = {\n\t\tx: ( x / window.innerWidth ) * 2 - 1,\n\t\ty: - ( y / window.innerHeight ) * 2 + 1\n\t};\n\tconst vector = new THREE.Vector3( mouse.x, mouse.y ).unproject( camera );\n\tconst raycaster = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize());\n\tconst intersects = raycaster.intersectObject( scene, true );\n\tif(intersects.length > 0 && intersects[ 0 ].object !== selected) {\n\t\tselected = intersects[ 0 ].object;\n\t\tconsole.log(selected);\n\t\tzoom(selected);\n\t} else {\n\t\tselected = null;\n\t\tcamera.reset(); \n\t}\n}\n\nfunction onWindowResize() {\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n}\n\nfunction onDocumentMouseDown(event) {\n\tevent.preventDefault();\n\tisUserInteracting = true;\n\tonPointerDownPointerX = event.clientX;\n\tonPointerDownPointerY = event.clientY;\n\tonPointerDownLon = lon;\n\tonPointerDownLat = lat;\n}\n\nfunction onDocumentMouseWheel( event ) {\n\tconsole.log('event', camera.fov)\n\n\tcamera.fov += event.deltaY * 0.05;\n\tcamera.updateProjectionMatrix();\n\n}\n\nfunction onDocumentMouseMove(event) {\n\tif (isUserInteracting === true) {\n\t\tlon = (onPointerDownPointerX - event.clientX) * 0.1 + onPointerDownLon;\n\t}\n}\n\nfunction onDocumentMouseUp(event) {\n\tisUserInteracting = false;\n}\n\nfunction onDocumentClick(event) {\n\tcamera.fov = zoomed ? fovMin : fovMax\n\t// i = zoomed ? -1 : 1\n\tzoomed = !zoomed\n\ttween\n\t// .onUpdate(() => {\n\t// \tcamera.fov = \n\t// })\n\t.start();\n\n\n\t// int = setInterval(() => {\n\t// \tval = val + 0.05*i;\n\t// \tcamera.fov = val;\n\t// \ti++;\n\t// \tconsole.log(val);\n\t// \tif(val > 85) {\n\t// \t\tclearInterval(int)\n\t// \t}\n\t// },30);\n}\n\n// var coords = { x: 0, y: 0 };\n// var tween = new TWEEN.Tween({x: 75})\n//     .to({x: 85}, 1000)\n//     .onUpdate(function() {\n//     \tcamera.fov = this.x\n//     })\n\nfunction animate() {\n\trequestAnimationFrame(animate);\n\tupdate();\n}\n\nfunction render() {\n\trenderer.render(scene, camera);\n}\n\nfunction update(time) {\n\tlat = Math.max(-85, Math.min(85, lat));\n\tphi = THREE.Math.degToRad(90 - lat);\n\ttheta = THREE.Math.degToRad(lon);\n\tcamera.target.x = 500 * Math.sin(phi) * Math.cos(theta);\n\tcamera.target.y = 500 * Math.cos(phi);\n\tcamera.target.z = 500 * Math.sin(phi) * Math.sin(theta);\n\tcamera.lookAt(camera.target);\n\t// TWEEN.update(time);\n\t// camera.fov = camera.fov += 0.1 \n\t// console.log(camera.fov)\n\tcamera.updateProjectionMatrix();\n\trender();\n}"]}