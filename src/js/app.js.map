{"version":3,"sources":["index.js"],"names":["camera","scene","renderer","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLat","onMouseDownLon","lon","lat","phi","theta","fovMin","fovMax","zoomed","onPointerDownPointerX","onPointerDownPointerY","onPointerDownLon","onPointerDownLat","selected","controls","timeline","init","animate","container","mesh","document","getElementById","THREE","PerspectiveCamera","window","innerWidth","innerHeight","target","Vector3","Scene","add","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","Mesh","light","DirectionalLight","position","set","name","mat2","MeshLambertMaterial","side","DoubleSide","color","object","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","TrackballControls","rotateSpeed","zoomSpeed","panSpeed","noZoom","noPan","staticMoving","dynamicDampingFactor","enabled","TweenLite","ticker","addEventListener","render","TimelineLite","onStart","removeEventListener","update","onComplete","position0","copy","reset","onDocumentMouseUp","onWindowResize","mouseDown","startX","startY","easing","getDistance","helper","BoundingBoxHelper","width","x","height","y","vFOV","fov","Math","PI","ratio","tan","screen","aspect","size","max","distance","box","z","pos","speed","parent","clone","localToWorld","clear","to","ease","rotation","zoom","worldToLocal","e","touches","clientX","clientY","mouse","vector","unproject","raycaster","Raycaster","sub","normalize","intersects","intersectObject","length","console","log","updateProjectionMatrix","onDocumentMouseDown","event","preventDefault","onDocumentMouseWheel","deltaY","onDocumentMouseMove","onDocumentClick","tween","start","requestAnimationFrame","time","min","degToRad","sin","cos","lookAt"],"mappings":"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","file":"app.js","sourcesContent":["let camera;\nlet scene;\nlet renderer;\nlet isUserInteracting = false;\nconst onMouseDownMouseX = 0;\nconst onMouseDownMouseY = 0;\nconst onMouseDownLat = 0;\nconst onMouseDownLon = 0;\nlet lon = 0;\nlet lat = 0;\nlet phi = 0;\nlet theta = 0;\nlet fovMin = 75;\nlet fovMax = 55;\nlet zoomed;\n\nlet onPointerDownPointerX;\nlet onPointerDownPointerY;\nlet onPointerDownLon;\nlet onPointerDownLat;\n\nlet selected;\nlet controls;\nlet timeline;\n\ninit();\nanimate();\n\nfunction init() {\n\tlet container;\n\tlet mesh;\n\tcontainer = document.getElementById('container');\n\tcamera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1100);\n\tcamera.target = new THREE.Vector3(0, 0, 0);\n\tscene = new THREE.Scene();\n\tscene.add(camera)\n\tconst geometry = new THREE.SphereGeometry(500, 60, 40);\n\tgeometry.scale(-1, 1, 1);\n\tconst material = new THREE.MeshBasicMaterial({\n\t\tmap: new THREE.TextureLoader().load('textures/AnimusPanorama.jpg')\n\t});\n\tmesh = new THREE.Mesh(geometry, material);\n\tscene.add(mesh);\n\n\t// add light\n\tlet light = new THREE.DirectionalLight('white', 1);\n\tlight.position.set(-4,4,4);\n\tlight.name = 'Back light';\n\tscene.add(light);\n\n\t// add a sphere to click\n\tlet mat2 = new THREE.MeshLambertMaterial({side: THREE.DoubleSide, color: '#f4d742'});\n\tlet object = new THREE.Mesh(new THREE.SphereGeometry(4,20,20),mat2);\n\tobject.position.set( 40, 0, 0 );\n\tobject.name = 'Object 1';\n\tscene.add(object);\n\n\trenderer = new THREE.WebGLRenderer();\n\trenderer.setPixelRatio(window.devicePixelRatio);\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n\tcontainer.appendChild(renderer.domElement);\n\n\t// set up controls\n\tcontrols = new THREE.TrackballControls(camera);\n\tcontrols.rotateSpeed = 3.6;\n\tcontrols.zoomSpeed = 0.8;\n\tcontrols.panSpeed = 1;\n\tcontrols.noZoom = false;\n\tcontrols.noPan = false;\n\tcontrols.staticMoving = false;\n\tcontrols.dynamicDampingFactor = 0.12;\n\tcontrols.enabled = true;\n\t\n\tTweenLite.ticker.addEventListener('tick', render );\n\n\ttimeline = new TimelineLite({\n\t\tonStart: function(){\n\t\t\tTweenLite.ticker.removeEventListener(\"tick\", controls.update );\n\t\t\tcontrols.enabled = false;\n\t\t},\n\t\tonComplete: function(){\n\t\t\tTweenLite.ticker.addEventListener(\"tick\", controls.update );\n\t\t\tcontrols.position0.copy(camera.position);\n\t\t\tcontrols.reset();\n\t\t\tcontrols.enabled = true;\n\t\t}\n\t});\n\n\t// set up click handlers\n\t// document.addEventListener('mousedown', onDocumentMouseDown, false);\n\t// document.addEventListener('mousemove', onDocumentMouseMove, false);\n\tdocument.addEventListener('mouseup', onDocumentMouseUp, false);\n\twindow.addEventListener('resize', onWindowResize, false);\n\tdocument.addEventListener('mousedown', mouseDown, false);\n\tTweenLite.ticker.addEventListener(\"tick\", controls.update);\n}\n\nlet startX\nlet startY\nlet easing = 'Expo.easeInOut';\n\nfunction getDistance(object) {\n\tconst helper = new THREE.BoundingBoxHelper(object, 0xff0000);\n\thelper.update();\n\n\tlet width = helper.scale.x;\n\tlet height = helper.scale.y;\n\n\t// Set camera distance\n\tconst vFOV = camera.fov * Math.PI / 180;\n\n\tconst ratio = 2 * Math.tan( vFOV / 2 );\n\tconst screen = ratio * camera.aspect;\n\tconst size = Math.max(height,width);\n\tconst distance = (size / screen) + (helper.box.max.z / screen);\n\n\treturn distance;\n};\n\nfunction reset() {\n\n\tvar pos = { x: 0, y: 0 };\n\tconst distance = 60;\n\tconst speed = 1;\n \n\tif ( camera.parent !== scene ) {\n\t\tvar pos = camera.position.clone();\n\t\tcamera.parent.localToWorld(camera.position);\n\t\tscene.add(camera);\n\t}\n \n\ttimeline.clear();\n\ttimeline.to( camera.position, speed, { \n\tx: pos.x, \n\ty: pos.y, \n\tz: distance, \n\tease: easing \n\t}, 0);\n \ttimeline.to( camera.rotation, speed, { x: 0, y: 0, z: 0, ease: easing}, 0);\n\n}; \n\nfunction zoom(object) {\n\n\tconst pos = camera.position.clone();\n\tobject.worldToLocal(camera.position);\n\tobject.add(camera);\n\n\tconst speed = 1;\n\ttimeline.clear();\n\n\ttimeline.to( camera.position, speed, {\n\t\tx: pos.x,\n\t\ty: pos.y,\n\t\tz: getDistance(object),\n\t\tease: easing\n\t},0);\n\n};\n\nfunction mouseDown(e) {\n\tconst x = ( e.touches ? e.touches[0].clientX : e.clientX );\n\tconst y = ( e.touches ? e.touches[0].clientY : e.clientY );\n\tconst mouse = {\n\t\tx: ( x / window.innerWidth ) * 2 - 1,\n\t\ty: - ( y / window.innerHeight ) * 2 + 1\n\t};\n\tconst vector = new THREE.Vector3( mouse.x, mouse.y ).unproject( camera );\n\tconst raycaster = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize());\n\tconst intersects = raycaster.intersectObject( scene, true );\n\tif(intersects.length > 0 && intersects[ 0 ].object !== selected) {\n\t\tselected = intersects[ 0 ].object;\n\t\tconsole.log(selected);\n\t\tzoom(selected);\n\t} else {\n\t\tselected = null;\n\t\tcamera.reset(); \n\t}\n}\n\nfunction onWindowResize() {\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize(window.innerWidth, window.innerHeight);\n}\n\nfunction onDocumentMouseDown(event) {\n\tevent.preventDefault();\n\tisUserInteracting = true;\n\tonPointerDownPointerX = event.clientX;\n\tonPointerDownPointerY = event.clientY;\n\tonPointerDownLon = lon;\n\tonPointerDownLat = lat;\n}\n\nfunction onDocumentMouseWheel( event ) {\n\tconsole.log('event', camera.fov)\n\n\tcamera.fov += event.deltaY * 0.05;\n\tcamera.updateProjectionMatrix();\n\n}\n\nfunction onDocumentMouseMove(event) {\n\tif (isUserInteracting === true) {\n\t\tlon = (onPointerDownPointerX - event.clientX) * 0.1 + onPointerDownLon;\n\t}\n}\n\nfunction onDocumentMouseUp(event) {\n\tisUserInteracting = false;\n}\n\nfunction onDocumentClick(event) {\n\tcamera.fov = zoomed ? fovMin : fovMax\n\t// i = zoomed ? -1 : 1\n\tzoomed = !zoomed\n\ttween\n\t// .onUpdate(() => {\n\t// \tcamera.fov = \n\t// })\n\t.start();\n\n\n\t// int = setInterval(() => {\n\t// \tval = val + 0.05*i;\n\t// \tcamera.fov = val;\n\t// \ti++;\n\t// \tconsole.log(val);\n\t// \tif(val > 85) {\n\t// \t\tclearInterval(int)\n\t// \t}\n\t// },30);\n}\n\n// var coords = { x: 0, y: 0 };\n// var tween = new TWEEN.Tween({x: 75})\n//     .to({x: 85}, 1000)\n//     .onUpdate(function() {\n//     \tcamera.fov = this.x\n//     })\n\nfunction animate() {\n\trequestAnimationFrame(animate);\n\tupdate();\n}\n\nfunction render() {\n\trenderer.render(scene, camera);\n}\n\nfunction update(time) {\n\tlat = Math.max(-85, Math.min(85, lat));\n\tphi = THREE.Math.degToRad(90 - lat);\n\ttheta = THREE.Math.degToRad(lon);\n\tcamera.target.x = 500 * Math.sin(phi) * Math.cos(theta);\n\tcamera.target.y = 500 * Math.cos(phi);\n\tcamera.target.z = 500 * Math.sin(phi) * Math.sin(theta);\n\tcamera.lookAt(camera.target);\n\t// TWEEN.update(time);\n\t// camera.fov = camera.fov += 0.1 \n\t// console.log(camera.fov)\n\tcamera.updateProjectionMatrix();\n\trender();\n}"]}