{"version":3,"sources":["index.js"],"names":["lon","fovMin","fovMax","zoomed","onPointerDownPointerX","onPointerDownLon","manager","THREE","LoadingManager","onProgress","item","loaded","total","console","log","onLoad","onError","audio","document","createElement","source","src","appendChild","camera","container","color","controls","clock","delta","deviceControls","h","hotspot","hsParticles","info","layer","logoGeo","logoMaterial","logoMesh","logoTexture","marker","mesh","materials","mouse","mousePos","objects","parameters","particles","particleMaterial","rainDensity","rainGeometry","raycaster","renderer","rotateSpeed","scene","size","smokeParticles","spotLight","spotLightHelper","sprite","stats","hotspots","hotspotLocations","isUserInteracting","onMouseDownMouseX","onMouseDownMouseY","onMouseDownLon","lat","onMouseDownLat","phi","theta","getElementById","selectedObjects","loader","renderPass","outlinePass","composer","effectFXAA","init","animate","width","window","innerWidth","height","innerHeight","devicePixelRatio","WebGLRenderer","antialias","shadowMap","enabled","setClearColor","setPixelRatio","setSize","PerspectiveCamera","target","Vector3","Scene","geometry","SphereGeometry","scale","material","MeshBasicMaterial","map","TextureLoader","load","fog","Mesh","name","add","initStats","DeviceOrientationControls","Raycaster","Vector2","buildHotspots","PointerLockControls","getObject","Clock","EffectComposer","RenderPass","addPass","OutlinePass","edgeStrength","edgeGlow","edgeThickness","pulsePeriod","visibleEdgeColor","r","g","b","texture","patternTexture","wrapS","RepeatWrapping","wrapT","lod","ShaderPass","FXAAShader","uniforms","value","set","renderToScreen","domElement","addEventListener","getPosition","onDocumentMouseDown","onDocumentMouseMove","onDocumentMouseUp","onDocumentTouchStart","onDocumentMouseWheel","event","preventDefault","dataTransfer","dropEffect","body","style","opacity","reader","FileReader","image","result","needsUpdate","readAsDataURL","files","onWindowResize","initRain","buildHotspot","JSONLoader","hotspotLocation","index","center","box","Box3","setFromObject","x","y","z","rotation","Math","PI","hitboxGeo","BoxBufferGeometry","getSize","hitboxMat","wireframe","hitboxMesh","group","Group","position","buildSmoke","light","DirectionalLight","directionalLight","normalize","smokeTexture","ImageUtils","loadTexture","smokeMaterial","MeshLambertMaterial","transparent","smokeGeo","PlaneGeometry","p","particle","random","push","evolveSmoke","sp","length","crossOrigin","evolveHotspot","hs","Geometry","sprite1","sprite2","sprite3","sprite4","sprite5","i","vertex","vertices","PointCloudMaterial","blending","AdditiveBlending","depthTest","setHSL","PointCloud","animateRain","time","Date","now","children","object","translateY","aspect","updateProjectionMatrix","clientX","touches","clientY","addSelectedObject","setFromCamera","intersects","intersectObjects","filter","intersect","match","forEach","parent","rotateHotspots","fov","deltaY","requestAnimationFrame","update","max","min","degToRad","sin","cos","lookAt","getDelta","render","Number","undefined","scrollLeft","documentElement","scrollTop","offsetLeft","offsetTop","Stats","left","top","zIndex"],"mappings":"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","file":"app.js","sourcesContent":["let lon = 30;\n// let lat = 0;\n// let phi = 0;\n// let theta = 0;\nlet fovMin = 75;\nlet fovMax = 55;\nlet zoomed;\n\nlet onPointerDownPointerX;\nlet onPointerDownLon;\n// let onPointerDownLat;\n\n\n//************************************************************************//\n//                             Init Loader                                //\n//************************************************************************//\n\n\nlet manager = new THREE.LoadingManager();\n\nmanager.onProgress = function (item, loaded, total) {\n\titem = 'textures/AC-Logo.png'\n    console.log(item, loaded, total);\n};\nmanager.onLoad = function () {\n    console.log('all items loaded');\n\treturn item\n};\nmanager.onError = function () {\n    console.log('there has been an error');\n};\n\n\n//************************************************************************//\n//                             Init Audio                                 //\n//************************************************************************//\n\nlet audio = document.createElement('audio');\nlet source = document.createElement('source');\nsource.src = '/audio/AC-Trailer.mp3';\naudio.appendChild(source);\n// audio.play();\n\n//************************************************************************//\n//                              Variables                           \t  //\n//************************************************************************//\n\nlet camera, container, color, controls, clock, delta, deviceControls, h, hotspot, hsParticles = [], info, layer = false, logoGeo, logoMaterial, logoMesh, logoTexture, marker, mesh, materials = [], mouse, mousePos, objects = [], parameters, particles, particleMaterial, rainDensity = 20000, rainGeometry, raycaster, renderer, rotateSpeed = 0.1, scene, size, smokeParticles = [], spotLight, spotLightHelper, sprite, stats; \n\nlet hotspots = [];\nlet hotspotLocations = [\n\t[-20, 0, -475], // -475Z\n\t[145, 0, -475], // -475Z\n\t[345, 0, -205], // -475Z\n\t[-235, 0, -435], // -435Z\n\t[-445, 0, -25], // -405Z\n\t[450, 0, 90],\n\t[400, 0, 225],\n\t[65, 0, 400],\n\t[-95, 0, 400],\n\t[-270, 0, 105]\n];\n\nlet isUserInteracting = true,\nonMouseDownMouseX = 0, onMouseDownMouseY = 0,\nonMouseDownLon = 0,\nlat = 0, onMouseDownLat = 0,\nphi = 0, theta = 0;\n\ncontainer = document.getElementById( 'container' );\n\nlet selectedObjects = [];\nlet loader;\nlet renderPass;\nlet outlinePass;\nlet composer;\nlet effectFXAA;\n\ninit();\nanimate();\n\n//************************************************************************//\n//                             Init Scene                                 //\n//************************************************************************//\n\nfunction init() {\n\n\tvar width = window.innerWidth || 1;\n\tvar height = window.innerHeight || 1;\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\trenderer = new THREE.WebGLRenderer( { antialias: false } );\n\trenderer.shadowMap.enabled = true;\n\trenderer.setClearColor( 0xa0a0a0 );\n\trenderer.setPixelRatio( 1 );\n\trenderer.setSize( width, height );\n\n\tcamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000 );\n\tcamera.target = new THREE.Vector3( 0, 0, 0 );\n\tscene = new THREE.Scene();\n\n\tlet geometry = new THREE.SphereGeometry( 500, 60, 400 );\n\tgeometry.scale( - 1, 1, 1 );\n\n\tlet material = new THREE.MeshBasicMaterial( {\n\t\tmap: new THREE.TextureLoader().load( 'textures/AnimusPanorama.jpg' ),\n\t\tfog: true,\n\t});\n\t\n\tmesh = new THREE.Mesh( geometry, material );\n\tmesh.name = 'scene';\n\tscene.add( mesh );\n\t\n\tstats = initStats()\n\t\n\tdeviceControls = new THREE.DeviceOrientationControls( camera );\n\t\n\traycaster = new THREE.Raycaster();\n\tmouse = new THREE.Vector2();\n\t\n\t// Build items for raycaster clicks\n\tbuildHotspots();\n\n\tcontrols = new THREE.PointerLockControls( camera );\n\tscene.add( controls.getObject() );\n\t\n\tclock = new THREE.Clock();\n\t// renderer = new THREE.WebGLRenderer({\n\t// \tantialias: true,\n\t// \talpha: true,\n\t// });\n\t// renderer.setPixelRatio( window.devicePixelRatio );\n\t// renderer.setSize( window.innerWidth, window.innerHeight );\n\n\t// postprocessing\n\tcomposer = new THREE.EffectComposer( renderer );\n\trenderPass = new THREE.RenderPass( scene, camera );\n\tcomposer.addPass( renderPass );\n\toutlinePass = new THREE.OutlinePass( new THREE.Vector2(window.innerWidth, window.innerHeight), scene, camera);\n\n\toutlinePass.edgeStrength = 10.0;\n\toutlinePass.edgeGlow = 10.0;\n\toutlinePass.edgeThickness = 4.0;\n\toutlinePass.pulsePeriod = 5;\n\toutlinePass.visibleEdgeColor = {r: 60, g: 60, b: 60}\n\n\tcomposer.addPass( outlinePass );\n\tvar onLoad = function(texture) {\n\t    outlinePass.patternTexture = texture;\n\t    texture.wrapS = THREE.RepeatWrapping;\n\t    texture.wrapT = THREE.RepeatWrapping;\n\t};\n\tvar lod = new THREE.TextureLoader();\n\tlod.load(\n\t    // resource URL\n\t    'textures/tri_pattern.jpg',\n\t    // Function when resource is loaded\n\t    onLoad\n\t);\n\n\teffectFXAA = new THREE.ShaderPass(THREE.FXAAShader);\n\teffectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight );\n\teffectFXAA.renderToScreen = true;\n\tcomposer.addPass( effectFXAA );\n\n\tcontainer.appendChild( renderer.domElement );\n\tcontainer.addEventListener(\"mousemove\", getPosition, false);\n\t\n\tdocument.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\tdocument.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\tdocument.addEventListener( 'mouseup', onDocumentMouseUp, false );\n\tdocument.addEventListener( 'touchstart', onDocumentTouchStart, false );\n\tdocument.addEventListener( 'wheel', onDocumentMouseWheel, false );\n\n\tdocument.addEventListener( 'dragover', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.dataTransfer.dropEffect = 'copy';\n\n\t}, false );\n\n\tdocument.addEventListener( 'dragenter', function ( event ) {\n\n\t\tdocument.body.style.opacity = 0.5;\n\n\t}, false );\n\n\tdocument.addEventListener( 'dragleave', function ( event ) {\n\n\t\tdocument.body.style.opacity = 1;\n\n\t}, false );\n\n\tdocument.addEventListener( 'drop', function ( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tlet reader = new FileReader();\n\t\treader.addEventListener( 'load', function ( event ) {\n\n\t\t\tmaterial.map.image.src = event.target.result;\n\t\t\tmaterial.map.needsUpdate = true;\n\n\t\t}, false );\n\t\treader.readAsDataURL( event.dataTransfer.files[ 0 ] );\n\n\t\tdocument.body.style.opacity = 1;\n\n\t}, false );\n\n\twindow.addEventListener( 'resize', onWindowResize, false );\n\t\n\tinitRain();\n\t// buildSmoke();\n\tbuildHotspot();\n\t\n\tdocument.body.appendChild( renderer.domElement );\n}\n\n\nfunction buildHotspots() {\n\tloader = new THREE.JSONLoader();\n\tloader.load('/js/ac-logo.js', function(geometry) {\n\t\thotspots = hotspotLocations.map( (hotspotLocation, index) => {\n\t\t\tgeometry.center();\n\t\t\tlet scale = 10;\n\t\t\tlet hotspot = new THREE.Mesh(geometry, new THREE.MeshBasicMaterial( { color: '#870000', opacity: 1 } ));\n\t\t\thotspot.name = `hotspot-${index}`;\n\t\t\tvar box = new THREE.Box3().setFromObject(hotspot);\n\t\t\thotspot.scale.x = hotspot.scale.y = hotspot.scale.z = scale\n\t\t\thotspot.rotation.x = Math.PI\n\n\t\t\t// hotspot.scale.x = 8\n\t\t\t// hotspot.scale.y = 10\n\t\t\t// hotspot.scale.z = 8\n\t\t\t// hotspot.rotation.y = 3\n\n\t\t\tlet hitboxGeo = new THREE.BoxBufferGeometry( box.getSize().x * scale * 1.2, 200, 10 );\n\t\t\tlet hitboxMat = new THREE.MeshBasicMaterial({wireframe: true});\n\t\t\t// // hitboxMat.visible = false\n\t\t\tlet hitboxMesh = new THREE.Mesh( hitboxGeo, hitboxMat );\n\t\t\thitboxMesh.name = `hitbox-${index}`;\n\n\t\t\tvar group = new THREE.Group();\n\t\t\tgroup.name = `group-${index}`\n\t\t\tgroup.position.set(hotspotLocation[0], hotspotLocation[1], hotspotLocation[2]);\n\t\t\tscene.add(group);\n\t\t\tgroup.add(hotspot);\n\t\t\tgroup.add(hitboxMesh);\n\n\t\t\treturn group;\n\n\t\t});\n\t});\n}\n\nfunction buildSmoke() {\n\t// Smoke Light\n    let light = new THREE.DirectionalLight(0xffffff, 1.5);\n    light.position.set(-1, 0, 1);\n    scene.add(light);\n\t\n\tlet directionalLight = new THREE.DirectionalLight(0xffffff);\n    directionalLight.position.set(1, 1, 1).normalize();\n    scene.add(directionalLight);\n  \n    let smokeTexture = THREE.ImageUtils.loadTexture('https://s3-us-west-2.amazonaws.com/s.cdpn.io/95637/Smoke-Element.png');\n    let smokeMaterial = new THREE.MeshLambertMaterial({\n\t\tcolor: 0xffffff, \n\t\tmap: smokeTexture, \n\t\ttransparent: true\n\t});\n    let smokeGeo = new THREE.PlaneGeometry(500, 500);\n     \n    for (let p = 0; p < 150; p++) {\n        let particle = new THREE.Mesh(smokeGeo,smokeMaterial);\n        particle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n        particle.rotation.z = Math.random() * 360;\n        scene.add(particle);\n        smokeParticles.push(particle);\n    }\t\n}\n\n\nfunction evolveSmoke() {\n    let sp = smokeParticles.length;\n    while(sp--) {\n        smokeParticles[sp].rotation.z += (delta * 0.2);\n    }\n}\n\nfunction buildHotspot() {\n\tTHREE.ImageUtils.crossOrigin = ''; \n\t\n\t// for ( let i = 0; i < 10; i ++ ) {\n\t\t\n\t\t// let logoTexture = THREE.ImageUtils.loadTexture('/textures/animus_red_logo.png');\n\t\t// logoTexture.crossOrigin = 'anonymous';\n\t\t\n\t\t// let logoMaterial = new THREE.MeshLambertMaterial({\n\t\t// \tcolor: 0xffffff, \n\t\t// \tmap: logoTexture, \n\t\t// \ttransparent: true\n\t\t// });\n\t\t\n\t\t// let logoGeo = new THREE.PlaneGeometry(40, 60);\n\t\t// // let hotspots = [];\n\t\t\n\t\t// hotspot = new THREE.Mesh(logoGeo, logoMaterial);\n\t\t\n\t\t// // hotspot.position.x = Math.random() * 800 - 400;\n\t\t// // hotspot.position.y = 0;\n\t\t// // hotspot.position.z = -400;\n\t\t// // \n\t\t// // hotspot.scale.x = Math.random() * 2 + 1;\n\t\t// // hotspot.scale.y = Math.random() * 2 + 1;\n\t\t// // hotspot.scale.z = Math.random() * 2 + 1;\n\t\t// // \n\t\t// // hotspot.rotation.x = Math.random() * 2 * Math.PI;\n\t\t// // hotspot.rotation.y = Math.random() * 2 * Math.PI;\n\t\t// // hotspot.rotation.z = Math.random() * 2 * Math.PI;\n\t\t// hotspot.position.set(-45, 0, -400);\n\t\t// // hotspot.rotation.x = 0.1;\n\t\t// scene.add(hotspot);\n\t\t\n\t\t// hotspots.push(hotspot)\t\t\n\t// }\t\n\t\n     let light = new THREE.DirectionalLight(0xffffff, 1.5);\n\t light.position.set(-1, 0, 1);\n\t scene.add(light);\n    // for (let p = 0; p < 50; p++) {\n    //     let particle = new THREE.Mesh(logoGeo, logoMaterial);\n    //     particle.position.set(Math.random()*500-250,Math.random()*500-250,Math.random()*1000-100);\n    //     particle.rotation.z = Math.random() * 360;\n    //     scene.add(particle);\n    //     hsParticles.push(particle);\n    // }\t\n}\n\nfunction evolveHotspot() {\n    let hs = hsParticles.length;\n    while(hs--) {\n        hsParticles[hs].rotation.z += (delta * 0.2);\n    }\n}\n\nfunction initRain() {\n\trainGeometry = new THREE.Geometry();\n\n\tlet sprite1 = THREE.ImageUtils.loadTexture( \"textures/rain1.png\" ),\n\tsprite2 = THREE.ImageUtils.loadTexture( \"textures/rain2.png\" ),\n\tsprite3 = THREE.ImageUtils.loadTexture( \"textures/rain3.png\" ),\n\tsprite4 = THREE.ImageUtils.loadTexture( \"textures/rain4.png\" ),\n\tsprite5 = THREE.ImageUtils.loadTexture( \"textures/rain5.png\" );\n\n\tfor (let i = 0; i < rainDensity; i++ ) {\n\t\tlet vertex = new THREE.Vector3();\n\t\tvertex.x = Math.random() * 2000 - 1000;\n\t\tvertex.y = Math.random() * 4000 + 500;\n\t\tvertex.z = Math.random() * 2000 - 1000;\n\n\t\trainGeometry.vertices.push( vertex );\n\t}\n\n\tparameters = [ [ [1.0, 0.2, 0.5], \tsprite2, 20 ],\n\t\t\t\t   [ [0.95, 0.1, 0.5], \tsprite3, 15 ],\n\t\t\t\t   [ [0.90, 0.05, 0.5], sprite1, 10 ],\n\t\t\t\t   [ [0.85, 0, 0.5], \tsprite5, 8 ],\n\t\t\t\t   [ [0.80, 0, 0.5], \tsprite4, 5 ],\n\t\t\t\t   ];\n\n\tfor (let i = 0; i < parameters.length; i++ ) {\n\n\t\tcolor  = parameters[i][0];\n\t\tsprite = parameters[i][1];\n\t\tsize   = parameters[i][2];\n\n\t\tmaterials[i] = new THREE.PointCloudMaterial({ \n\t\t\tsize: size, \n\t\t\tmap: sprite, \n\t\t\tblending: THREE.AdditiveBlending, \n\t\t\tdepthTest: false, \n\t\t\ttransparent : true \n\t\t});\n\t\tmaterials[i].color.setHSL( color[0], color[1], color[2] );\n\n\t\tparticles = new THREE.PointCloud( rainGeometry, materials[i] );\n\n\t\tparticles.rotation.z = Math.random() * 0.20 + 0.10;\n\n\t\tscene.add( particles );\n\t}\n}\n\nfunction animateRain() {\n\t// console.log(\"I'M ANIMATING THINGS\");\n\tlet time = Date.now() * 0.00005;\n\n\tfor (let i = 0; i < scene.children.length; i++ ) {\n\n\t\tlet object = scene.children[i];\n\t\t\n\t\tif ( object instanceof THREE.PointCloud ) {\n\t\t\t// Not getting into the log here\n\t\t\tconsole.log(\"I'M ANIMATING THINGS\");\n\t\t\tif (i == 0) {\n\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif (i > 0) {\n\t\t\t\tif (layer)\n\t\t\t\t\tobject.translateY(-10);\n\t\t\t\telse\n\t\t\t\t\tif(scene.children[i-1].position.y < ((window.innerHeight * -1) / 2 - 1000))\n\t\t\t\t\t\tobject.translateY(-10);\n\t\t\t}\n\n\t\t\tif ((object.position.y < window.innerHeight * -1 * 5)) {\n\t\t\t\t\tobject.position.y = 500;\n\t\t\t\t\tobject.position.x = 0;\n\t\t\t\t\tif (i == 0) layer = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (let i = 0; i < materials.length; i++ ) {\n\n\t\tcolor = parameters[i][0];\n\n\t\th = ( 360 * ( color[0] + time ) % 360 ) / 360;\n\t\tmaterials[i].color.setHSL( h, color[1], color[2] );\n\n\t}\n}\n\nfunction onWindowResize() {\n\tvar width = window.innerWidth || 1;\n\tvar height = window.innerHeight || 1;\n\tvar devicePixelRatio = window.devicePixelRatio || 1;\n\tcamera.aspect = width / height;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( width, height );\n\tcomposer.setSize( width, height );\n\teffectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight );\n}\n\nfunction onDocumentTouchStart( event ) {\n\tevent.preventDefault();\n\tevent.clientX = event.touches[0].clientX;\n\tevent.clientY = event.touches[0].clientY;\n\tonDocumentMouseDown( event );\n}\n\nfunction addSelectedObject(object) {\n\tconsole.log('addSelectedObject', object.name)\n\tselectedObjects = [];\n\tselectedObjects.push(object);\n}\n\nfunction onDocumentMouseDown( event ) {\n\traycaster.setFromCamera(mouse, camera);\n\tlet intersects = raycaster.intersectObjects(scene.children, true);\n\tintersects.filter( intersect => intersect.object.name.match(/hitbox/) )\n\t.forEach((item) => {\n\t\tlet target = item.object.parent.children[0]\n\t\t// target.material.color.set(Math.random() * 0xffffff)\n\t\taddSelectedObject(target)\n\t\toutlinePass.selectedObjects = selectedObjects\n\t})\n\t// intersects.forEach((intersect) => {\n\t// \tconsole.log('intersect', intersect.object.name);\n\t// \tlet object = intersect.object;\n\t// \tif(object.name !== 'scene') {\n\t// \t\tobject.parent.children[0].material.color.set(Math.random() * 0xffffff)\n\t// \t\taddSelectedObject(object);\n\t// \t\toutlinePass.selectedObjects = object;\n\t// \t}\n\t// });\n}\n\nfunction rotateHotspots() {\n\thotspots.forEach( hotspot => hotspot.rotation.y += rotateSpeed * 0.5 );\n}\n\nfunction onDocumentMouseMove( event ) {\n\tisUserInteracting = true;\n\tlon = event.clientX \n\t// if ( isUserInteracting === true ) {\n\t// \tlon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;\n\t// \t// lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;\n\t// }\n}\n\nfunction onDocumentMouseUp( event ) {\n\tisUserInteracting = false;\n}\n\n// Zoom in & out | Need to limit this to the starting point and a endind point\nfunction onDocumentMouseWheel( event ) {\n\t// if (camera.fov > 75) {\n\t// \tcamera.fov = 75\n\t// } else {\n\t// \tcamera.fov += event.deltaY * 0.01;\n\t// \tcamera.updateProjectionMatrix();\n\t// }\n\tcamera.fov += event.deltaY * 0.02;\n\tcamera.updateProjectionMatrix();\n}\n\nfunction animate() {\n\trequestAnimationFrame( animate );\n\tupdate();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n}\n\nfunction update() {\n\t// if ( isUserInteracting === false ) {\n\t// \t// lon += 0.1;\n\t// }\n\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\tphi = THREE.Math.degToRad( 90 - lat );\n\ttheta = THREE.Math.degToRad( lon );\n\n\tcamera.target.x = 500 * Math.sin( phi ) * Math.cos( theta );\n\t// camera.target.y = 500 * Math.cos( phi );\n\tcamera.target.z = 500 * Math.sin( phi ) * Math.sin( theta );\n\tcamera.lookAt( camera.target );\n\n\t/*\n\t// distortion\n\tcamera.position.copy( camera.target ).negate();\n\t*/\n\t// let delta = clock.getDelta(), speed = delta * CAMERAMOVESPEED;\n\t// controls.update(delta);\n\t// spotLight.target = marker;\n\t// controls.update()\n\t\n\t// spotLightHelper.update()\n\tstats.update()\n\tdelta = clock.getDelta();\n\n\tevolveSmoke();\n\tevolveHotspot();\n\t// animateRain();\n\t// rotateHotspot();\n\trotateHotspots();\n\t// rainEngine.update(0.01 * 0.5)\n\ttheta += 0.1;\n\t// let radius = 600;\n\t// camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );\n\t// camera.position.y = radius * Math.sin( THREE.Math.degToRad( theta ) );\n\t// camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );\n\t// camera.lookAt( scene.position );\n\t// renderer.render( scene, camera );\n\tcomposer.render();\n\t// renderer.autoClear = true;\n\t// renderer.setClearColor( 0xfff0f0 );\n\t// renderer.setClearAlpha( 0.0 );\n}\n\nfunction getPosition(event) {\n\tlet x = new Number();\n\tlet y = new Number();\n\t\n\tif (event.x != undefined && event.y != undefined) {\n\t\tx = event.x;\n\t\ty = event.y;\n\t} else { // Firefox method to get the position\n\t\tx = event.clientX + document.body.scrollLeft +\n\t\tdocument.documentElement.scrollLeft;\n\t\ty = event.clientY + document.body.scrollTop +\n\t\tdocument.documentElement.scrollTop;\n\t}\n\tx -= container.offsetLeft;\n\ty -= container.offsetTop;\t\n\t// alert(\"x: \" + x + \"  y: \" + y);\n\tconsole.log(\"x: \" + x + \"  y: \" + y);\n}\n\nfunction initStats() {\n\t// stats.setMode(0); // 0: fps, 1: ms\n\t// Align top-left\n\tstats = new Stats();\n\tstats.domElement.style.position = 'absolute';\n\t// stats.domElement.style.bottom = '0px';\n\tstats.domElement.style.left = '0px';\n\tstats.domElement.style.top = '0px';\n\tstats.domElement.style.zIndex = 100;\n\tcontainer.appendChild(stats.domElement);\n\treturn stats;\n}"]}